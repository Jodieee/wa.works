!function(w,$,_){"use strict";var c=/^.*(youtu\.be\/|youtube\.com\/v\/|youtube\.com\/embed\/|youtube\.com\/watch\?v=|youtube\.com\/watch\?.*\&v=)([^#\&\?]*).*/i;w.fn.backstretch=function(a,n){var s,h=arguments;return 0===w($).scrollTop()&&$.scrollTo(0,0),this.each(function(t){var e=w(this),i=e.data("backstretch");if(i){if("string"==typeof h[0]&&"function"==typeof i[h[0]]){var r=i[h[0]].apply(i,Array.prototype.slice.call(h,1));return r===i&&(r=_),void(r!==_&&((s=s||[])[t]=r))}n=w.extend(i.options,n),i.hasOwnProperty("destroy")&&i.destroy(!0)}if(!a||a&&0===a.length){var o=e.css("background-image");o&&"none"!==o?a=[{url:e.css("backgroundImage").replace(/url\(|\)|"|'/g,"")}]:w.error("No images were supplied for Backstretch, or element must have a CSS-defined background image.")}i=new y(this,a,n||{}),e.data("backstretch",i)}),s?1===s.length?s[0]:s:this},w.backstretch=function(t,e){return w("body").backstretch(t,e).data("backstretch")},w.expr[":"].backstretch=function(t){return w(t).data("backstretch")!==_},w.fn.backstretch.defaults={duration:5e3,transition:"fade",transitionDuration:0,animateFirst:!0,alignX:.5,alignY:.5,paused:!1,start:0,preload:2,preloadSize:1,resolutionRefreshRate:2500,resolutionChangeRatioThreshold:.1};var d,l,u,i,p,g,s={wrap:{left:0,top:0,overflow:"hidden",margin:0,padding:0,height:"100%",width:"100%",zIndex:-999999},itemWrapper:{position:"absolute",display:"none",margin:0,padding:0,border:"none",width:"100%",height:"100%",zIndex:-999999},item:{position:"absolute",margin:0,padding:0,border:"none",width:"100%",height:"100%",maxWidth:"none"}},T=(d=function(t){for(var e=1;e<t.length;e++){for(var i=t[e],r=e;t[r-1]&&parseInt(t[r-1].width,10)>parseInt(i.width,10);)t[r]=t[r-1],--r;t[r]=i}return t},l=function(t,e,i){for(var r,o,a=$.devicePixelRatio||1,n=C(),s=(S(),t<e?"portrait":e<t?"landscape":"square"),h=0,c=0;c<i.length&&("string"==typeof(o=i[c])&&(o=i[c]={url:o}),o.pixelRatio&&"auto"!==o.pixelRatio&&parseFloat(o.pixelRatio)!==a||o.deviceOrientation&&o.deviceOrientation!==n||o.windowOrientation&&o.windowOrientation!==n||o.orientation&&o.orientation!==s||(h=c,r=t,"auto"===o.pixelRatio&&(t*=a),!(o.width>=r)));c++);return i[Math.min(c,h)]},u=function(t,e){if("string"==typeof t)t=t.replace(/{{(width|height)}}/g,e);else if(t instanceof Array)for(var i=0;i<t.length;i++)t[i].src?t[i].src=u(t[i].src,e):t[i]=u(t[i],e);return t},function(t,e){for(var i=t.width(),r=t.height(),o=[],a=function(t,e){return"width"===e?i:"height"===e?r:t},n=0;n<e.length;n++)if(w.isArray(e[n])){e[n]=d(e[n]);var s=l(i,r,e[n]);o.push(s)}else{"string"==typeof e[n]&&(e[n]={url:e[n]});var h=w.extend({},e[n]);h.url=u(h.url,a),o.push(h)}return o}),m=function(t){return c.test(t.url)||t.isVideo},k=(i=[],p=function(t){for(var e=0;e<i.length;e++)if(i[e].src===t.src)return i[e];return i.push(t),t},g=function(t,e,i){"function"==typeof e&&e.call(t,i)},function t(e,i,r,o,a){if(void 0!==e){w.isArray(e)||(e=[e]),arguments.length<5&&"function"==typeof arguments[arguments.length-1]&&(a=arguments[arguments.length-1]),i="function"!=typeof i&&i?i:0,r="function"==typeof r||!r||r<0?e.length:Math.min(r,e.length),o="function"!=typeof o&&o?o:1,i>=e.length&&(r=i=0),o<0&&(o=r),o=Math.min(o,r);var n=e.slice(i+o,r-o);if(e=e.slice(i,o),r=e.length)for(var s,h=0,c=function(){++h===r&&(g(e,a,!n),t(n,0,0,o,a))},d=0;d<e.length;d++)m(e[d])||((s=new Image).src=e[d].url,(s=p(s)).complete?c():w(s).on("load error",c));else g(e,a,!0)}}),h=function(t){for(var e=[],i=0;i<t.length;i++)"string"==typeof t[i]?e.push({url:t[i]}):w.isArray(t[i])?e.push(h(t[i])):e.push(f(t[i]));return e},f=function(t,e){return(t.centeredX||t.centeredY)&&($.console&&$.console.log&&$.console.log("jquery.backstretch: `centeredX`/`centeredY` is deprecated, please use `alignX`/`alignY`"),t.centeredX&&(t.alignX=.5),t.centeredY&&(t.alignY=.5)),t.speed!==_&&($.console&&$.console.log&&$.console.log("jquery.backstretch: `speed` is deprecated, please use `transitionDuration`"),t.transitionDuration=t.speed,t.transition="fade"),t.resolutionChangeRatioTreshold!==_&&($.console.log("jquery.backstretch: `treshold` is a typo!"),t.resolutionChangeRatioThreshold=t.resolutionChangeRatioTreshold),t.fadeFirst!==_&&(t.animateFirst=t.fadeFirst),t.fade!==_&&(t.transitionDuration=t.fade,t.transition="fade"),t.scale&&(t.scale=x(t.scale)),r(t)},r=function(t,e){return"left"===t.alignX?t.alignX=0:"center"===t.alignX?t.alignX=.5:"right"===t.alignX?t.alignX=1:(t.alignX!==_||e)&&(t.alignX=parseFloat(t.alignX),isNaN(t.alignX)&&(t.alignX=.5)),"top"===t.alignY?t.alignY=0:"center"===t.alignY?t.alignY=.5:"bottom"===t.alignY?t.alignY=1:(t.alignX!==_||e)&&(t.alignY=parseFloat(t.alignY),isNaN(t.alignY)&&(t.alignY=.5)),t},e={cover:"cover",fit:"fit","fit-smaller":"fit-smaller",fill:"fill"};function x(t){return e.hasOwnProperty(t)?t:"cover"}var y=function(t,e,i){this.options=w.extend({},w.fn.backstretch.defaults,i||{}),this.firstShow=!0,f(this.options,!0),this.images=h(w.isArray(e)?e:[e]),this.options.paused&&(this.paused=!0),this.options.start>=this.images.length&&(this.options.start=this.images.length-1),this.options.start<0&&(this.options.start=0),this.isBody=t===document.body;var r=w($);this.$container=w(t),this.$root=this.isBody?z?r:w(document):this.$container,this.originalImages=this.images,this.images=T(this.options.alwaysTestWindowResolution?r:this.$root,this.originalImages),k(this.images,this.options.start||0,this.options.preload||1);var o=this.$container.children(".backstretch").first();if(this.$wrap=o.length?o:w('<div class="backstretch"></div>').css(this.options.bypassCss?{}:s.wrap).appendTo(this.$container),!this.options.bypassCss){if(!this.isBody){var a=this.$container.css("position"),n=this.$container.css("zIndex");this.$container.css({position:"static"===a?"relative":a,zIndex:"auto"===n?0:n}),this.$wrap.css({zIndex:-999998})}this.$wrap.css({position:this.isBody&&z?"fixed":"absolute"})}this.index=this.options.start,this.show(this.index),r.on("resize.backstretch",w.proxy(this.resize,this)).on("orientationchange.backstretch",w.proxy(function(){this.isBody&&0===$.pageYOffset&&($.scrollTo(0,1),this.resize())},this))};y.prototype={resize:function(){try{var t=this.options.alwaysTestWindowResolution?w($):this.$root,e=t.width(),i=t.height(),r=e/(this._lastResizeContainerWidth||0),o=i/(this._lastResizeContainerHeight||0),a=this.options.resolutionChangeRatioThreshold||0;if((e!==this._lastResizeContainerWidth||i!==this._lastResizeContainerHeight)&&(Math.abs(r-1)>=a||isNaN(r)||Math.abs(o-1)>=a||isNaN(o))&&(this._lastResizeContainerWidth=e,this._lastResizeContainerHeight=i,this.images=T(t,this.originalImages),this.options.preload&&k(this.images,(this.index+1)%this.images.length,this.options.preload),1===this.images.length&&this._currentImage.url!==this.images[0].url)){var n=this;clearTimeout(n._selectAnotherResolutionTimeout),n._selectAnotherResolutionTimeout=setTimeout(function(){n.show(0)},this.options.resolutionRefreshRate)}var s,h,c={left:0,top:0,right:"auto",bottom:"auto"},d=this.isBody?this.$root.width():this.$root.innerWidth(),l=this.isBody?$.innerHeight?$.innerHeight:this.$root.height():this.$root.innerHeight(),u=this.$itemWrapper.data("width"),p=this.$itemWrapper.data("height"),g=u/p||1,f=this._currentImage.alignX===_?this.options.alignX:this._currentImage.alignX,y=this._currentImage.alignY===_?this.options.alignY:this._currentImage.alignY,m=x(this._currentImage.scale||this.options.scale);if("fit"===m||"fit-smaller"===m){if(h=p,d<(s=u)||l<h||"fit-smaller"===m){var v=d/l;h=g<v?(s=Math.floor(l*g),l):v<g?(s=d,Math.floor(d/g)):(s=d,l)}}else h="fill"===m?(s=d,l):(s=Math.max(l*g,d),Math.max(s/g,l));c.top=-(h-l)*y,c.left=-(s-d)*f,c.width=s,c.height=h,this.options.bypassCss||this.$wrap.css({width:d,height:l}).find(">.backstretch-item").not(".deleteable").each(function(){w(this).find("img,video,iframe").css(c)});var b=w.Event("backstretch.resize",{relatedTarget:this.$container[0]});this.$container.trigger(b,this)}catch(t){}return this},show:function(d,l){if(!(Math.abs(d)>this.images.length-1)){var u=this,p=u.$wrap.find(">.backstretch-item").addClass("deleteable"),g=u.videoWrapper,f={relatedTarget:u.$container[0]};u.$container.trigger(w.Event("backstretch.before",f),[u,d]),this.index=d;var t=u.images[d];clearTimeout(u._cycleTimeout),delete u.videoWrapper;var y=m(t);return u.$item=y?(u.videoWrapper=new v(t),u.videoWrapper.$video.css("pointer-events","none")):w("<img />"),u.$itemWrapper=w('<div class="backstretch-item">').append(u.$item),this.options.bypassCss?u.$itemWrapper.css({display:"none"}):(u.$itemWrapper.css(s.itemWrapper),u.$item.css(s.item)),u.$item.bind(y?"canplay":"load",function(t){var e=w(this).parent(),i=e.data("options");l&&(i=w.extend({},i,l));var r=this.naturalWidth||this.videoWidth||this.width,o=this.naturalHeight||this.videoHeight||this.height;e.data("width",r).data("height",o);var a=function(t){return i[t]!==_?i[t]:u.options[t]},n=a("transition"),s=a("transitionEasing"),h=a("transitionDuration"),c=function(){g&&(g.stop(),g.destroy()),p.remove(),!u.paused&&1<u.images.length&&u.cycle(),u.options.bypassCss||u.isBody||u.$container.css("background-image","none"),w(["after","show"]).each(function(){u.$container.trigger(w.Event("backstretch."+this,f),[u,d])}),y&&u.videoWrapper.play()};u.firstShow&&!u.options.animateFirst||!h||!n?(e.show(),c()):function(t){var e=t.transition||"fade";"string"==typeof e&&-1<e.indexOf("|")&&(e=e.split("|")),e instanceof Array&&(e=e[Math.round(Math.random()*(e.length-1))]);var i=t.new,r=t.old?t.old:w([]);switch(e.toString().toLowerCase()){default:case"fade":i.fadeIn({duration:t.duration,complete:t.complete,easing:t.easing||_});break;case"fadeinout":case"fade_in_out":var o=function(){i.fadeIn({duration:t.duration/2,complete:t.complete,easing:t.easing||_})};r.length?r.fadeOut({duration:t.duration/2,complete:o,easing:t.easing||_}):o();break;case"pushleft":case"push_left":case"pushright":case"push_right":case"pushup":case"push_up":case"pushdown":case"push_down":case"coverleft":case"cover_left":case"coverright":case"cover_right":case"coverup":case"cover_up":case"coverdown":case"cover_down":var a=e.match(/^(cover|push)_?(.*)$/),n="left"===a[2]?"right":"right"===a[2]?"left":"down"===a[2]?"top":"up"===a[2]?"bottom":"right",s={display:""},h={};if(s[n]="-100%",h[n]=0,i.css(s).animate(h,{duration:t.duration,complete:function(){i.css(n,""),t.complete.apply(this,arguments)},easing:t.easing||_}),"push"===a[1]&&r.length){var c={};c[n]="100%",r.animate(c,{duration:t.duration,complete:function(){r.css("display","none")},easing:t.easing||_})}}}({new:e,old:p,transition:n,duration:h,easing:s,complete:c}),u.firstShow=!1,u.resize()}),u.$itemWrapper.appendTo(u.$wrap),u.$item.attr("alt",t.alt||""),u.$itemWrapper.data("options",t),y||u.$item.attr("src",t.url),u._currentImage=t,u}},current:function(){return this.index},next:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(this.index<this.images.length-1?this.index+1:0),this.show.apply(this,t)},prev:function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift(0===this.index?this.images.length-1:this.index-1),this.show.apply(this,t)},pause:function(){return this.paused=!0,this.videoWrapper&&this.videoWrapper.pause(),this},resume:function(){return this.paused=!1,this.videoWrapper&&this.videoWrapper.play(),this.cycle(),this},cycle:function(){if(1<this.images.length){clearTimeout(this._cycleTimeout);var t=this._currentImage&&this._currentImage.duration||this.options.duration,e=m(this._currentImage),i=function(){this.$item.off(".cycle"),this.paused||this.next()};if(e){if(!this._currentImage.loop){var r=0;this.$item.on("playing.cycle",function(){var t=w(this).data("player");clearTimeout(r),r=setTimeout(function(){t.pause(),t.$video.trigger("ended")},1e3*(t.getDuration()-t.getCurrentTime()))}).on("ended.cycle",function(){clearTimeout(r)})}this.$item.on("error.cycle initerror.cycle",w.proxy(i,this))}e&&!this._currentImage.duration?this.$item.on("ended.cycle",w.proxy(i,this)):this._cycleTimeout=setTimeout(w.proxy(i,this),t)}return this},destroy:function(t){w($).off("resize.backstretch orientationchange.backstretch"),this.videoWrapper&&this.videoWrapper.destroy(),clearTimeout(this._cycleTimeout),t||this.$wrap.remove(),this.$container.removeData("backstretch")}};var v=function(){this.init.apply(this,arguments)};v.prototype.init=function(t){var e,i=this,r=function(){i.$video=e,i.video=e[0]},o="video";if(t.url instanceof Array||!c.test(t.url)||(o="youtube"),"youtube"===(i.type=o)){v.loadYoutubeAPI(),i.ytId=t.url.match(c)[2];var a="https://www.youtube.com/embed/"+i.ytId+"?rel=0&autoplay=0&showinfo=0&controls=0&modestbranding=1&cc_load_policy=0&disablekb=1&iv_load_policy=3&loop=0&enablejsapi=1&origin="+encodeURIComponent($.location.origin);i.__ytStartMuted=!!t.mute||t.mute===_,e=w("<iframe />").attr({src_to_load:a}).css({border:0,margin:0,padding:0}).data("player",i),t.loop&&e.on("ended.loop",function(){i.__manuallyStopped||i.play()}),i.ytReady=!1,r(),$.YT?(i._initYoutube(),e.trigger("initsuccess")):w($).one("youtube_api_load",function(){i._initYoutube(),e.trigger("initsuccess")})}else{e=w("<video>").prop("autoplay",!1).prop("controls",!1).prop("loop",!!t.loop).prop("muted",!!t.mute||t.mute===_).prop("preload","auto").prop("poster",t.poster||"");for(var n=t.url instanceof Array?t.url:[t.url],s=0;s<n.length;s++){var h=n[s];"string"==typeof h&&(h={src:h}),w("<source>").attr("src",h.src).attr("type",h.type||null).appendTo(e)}e[0].canPlayType&&n.length?e.trigger("initsuccess"):e.trigger("initerror"),r()}},v.prototype._initYoutube=function(){var e=this,i=$.YT;e.$video.attr("src",e.$video.attr("src_to_load")).removeAttr("src_to_load");var t=!!e.$video[0].parentNode;if(!t){var r=w("<div>").css("display","none !important").appendTo(document.body);e.$video.appendTo(r)}var o=new i.Player(e.video,{events:{onReady:function(){e.__ytStartMuted&&o.mute(),t||(e.$video[0].parentNode===r[0]&&e.$video.detach(),r.remove()),e.ytReady=!0,e._updateYoutubeSize(),e.$video.trigger("canplay")},onStateChange:function(t){switch(t.data){case i.PlayerState.PLAYING:e.$video.trigger("playing");break;case i.PlayerState.ENDED:e.$video.trigger("ended");break;case i.PlayerState.PAUSED:e.$video.trigger("pause");break;case i.PlayerState.BUFFERING:e.$video.trigger("waiting");break;case i.PlayerState.CUED:e.$video.trigger("canplay")}},onPlaybackQualityChange:function(){e._updateYoutubeSize(),e.$video.trigger("resize")},onError:function(t){e.hasError=!0,e.$video.trigger({type:"error",error:t})}}});return e.ytPlayer=o,e},v.prototype._updateYoutubeSize=function(){var t=this;switch(t.ytPlayer.getPlaybackQuality()||"medium"){case"small":t.video.videoWidth=426,t.video.videoHeight=240;break;case"medium":t.video.videoWidth=640,t.video.videoHeight=360;break;default:case"large":t.video.videoWidth=854,t.video.videoHeight=480;break;case"hd720":t.video.videoWidth=1280,t.video.videoHeight=720;break;case"hd1080":t.video.videoWidth=1920,t.video.videoHeight=1080;break;case"highres":t.video.videoWidth=2560,t.video.videoHeight=1440}return t},v.prototype.play=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&(t.$video.trigger("play"),t.ytPlayer.playVideo()):t.video.play(),t},v.prototype.pause=function(){var t=this;return t.__manuallyStopped=!1,"youtube"===t.type?t.ytReady&&t.ytPlayer.pauseVideo():t.video.pause(),t},v.prototype.stop=function(){var t=this;return t.__manuallyStopped=!0,"youtube"===t.type?t.ytReady&&(t.ytPlayer.pauseVideo(),t.ytPlayer.seekTo(0)):(t.video.pause(),t.video.currentTime=0),t},v.prototype.destroy=function(){return this.ytPlayer&&this.ytPlayer.destroy(),this.$video.remove(),this},v.prototype.getCurrentTime=function(t){return"youtube"!==this.type?this.video.currentTime:this.ytReady?this.ytPlayer.getCurrentTime():0},v.prototype.setCurrentTime=function(t){var e=this;return"youtube"===e.type?e.ytReady&&e.ytPlayer.seekTo(t,!0):e.video.currentTime=t,e},v.prototype.getDuration=function(){return"youtube"!==this.type?this.video.duration:this.ytReady?this.ytPlayer.getDuration():0},v.loadYoutubeAPI=function(){if(!$.YT){w("script[src*=www\\.youtube\\.com\\/iframe_api]").length||w('<script type="text/javascript" src="https://www.youtube.com/iframe_api">').appendTo("body");var t=setInterval(function(){$.YT&&$.YT.loaded&&(w($).trigger("youtube_api_load"),clearTimeout(t))},50)}};var t,o,a,n,b,W,R,I,Y,P,C=function(){if("matchMedia"in $){if($.matchMedia("(orientation: portrait)").matches)return"portrait";if($.matchMedia("(orientation: landscape)").matches)return"landscape"}return screen.height>screen.width?"portrait":"landscape"},S=function(){return $.innerHeight>$.innerWidth?"portrait":$.innerWidth>$.innerHeight?"landscape":"square"},z=(t=navigator.userAgent,o=navigator.platform,a=t.match(/AppleWebKit\/([0-9]+)/),n=!!a&&a[1],b=t.match(/Fennec\/([0-9]+)/),W=!!b&&b[1],R=t.match(/Opera Mobi\/([0-9]+)/),I=!!R&&R[1],Y=t.match(/MSIE ([0-9]+)/),P=!!Y&&Y[1],!((-1<o.indexOf("iPhone")||-1<o.indexOf("iPad")||-1<o.indexOf("iPod"))&&n&&n<534||$.operamini&&"[object OperaMini]"==={}.toString.call($.operamini)||R&&I<7458||-1<t.indexOf("Android")&&n&&n<533||W&&W<6||"palmGetResource"in $&&n&&n<534||-1<t.indexOf("MeeGo")&&-1<t.indexOf("NokiaBrowser/8.5.0")||P&&P<=6))}(jQuery,window),$(document).ready(function(){$("nav a").on("click",function(t){if(""!==this.hash){t.preventDefault();var e=this.hash;$("html, body").animate({scrollTop:$(e).offset().top},1e3,function(){window.location.hash=e})}})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5iYWNrc3RyZXRjaC5qcyIsImluaXQuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsInVuZGVmaW5lZCIsIllPVVRVQkVfUkVHRVhQIiwiZm4iLCJiYWNrc3RyZXRjaCIsImltYWdlcyIsIm9wdGlvbnMiLCJyZXR1cm5WYWx1ZXMiLCJhcmdzIiwiYXJndW1lbnRzIiwic2Nyb2xsVG9wIiwic2Nyb2xsVG8iLCJ0aGlzIiwiZWFjaCIsImVhY2hJbmRleCIsIiR0aGlzIiwib2JqIiwiZGF0YSIsInJldHVyblZhbHVlIiwiYXBwbHkiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImV4dGVuZCIsImhhc093blByb3BlcnR5IiwiZGVzdHJveSIsImxlbmd0aCIsImNzc0JhY2tncm91bmRJbWFnZSIsImNzcyIsInVybCIsInJlcGxhY2UiLCJlcnJvciIsIkJhY2tzdHJldGNoIiwiZXhwciIsImVsZW0iLCJkZWZhdWx0cyIsImR1cmF0aW9uIiwidHJhbnNpdGlvbiIsInRyYW5zaXRpb25EdXJhdGlvbiIsImFuaW1hdGVGaXJzdCIsImFsaWduWCIsImFsaWduWSIsInBhdXNlZCIsInN0YXJ0IiwicHJlbG9hZCIsInByZWxvYWRTaXplIiwicmVzb2x1dGlvblJlZnJlc2hSYXRlIiwicmVzb2x1dGlvbkNoYW5nZVJhdGlvVGhyZXNob2xkIiwid2lkdGhJbnNlcnRTb3J0Iiwic2VsZWN0QmVzdCIsInJlcGxhY2VUYWdzSW5VcmwiLCJjYWNoZSIsImNhY2hpbmciLCJleGVjIiwic3R5bGVzIiwid3JhcCIsImxlZnQiLCJ0b3AiLCJvdmVyZmxvdyIsIm1hcmdpbiIsInBhZGRpbmciLCJoZWlnaHQiLCJ3aWR0aCIsInpJbmRleCIsIml0ZW1XcmFwcGVyIiwicG9zaXRpb24iLCJkaXNwbGF5IiwiYm9yZGVyIiwiaXRlbSIsIm1heFdpZHRoIiwib3B0aW1hbFNpemVJbWFnZXMiLCJhcnIiLCJpIiwidG1wIiwiaiIsInBhcnNlSW50IiwiY29udGFpbmVyV2lkdGgiLCJjb250YWluZXJIZWlnaHQiLCJpbWFnZVNpemVzIiwidGVzdFdpZHRoIiwiaW1hZ2UiLCJkZXZpY2VQaXhlbFJhdGlvIiwiZGV2aWNlT3JpZW50YXRpb24iLCJnZXREZXZpY2VPcmllbnRhdGlvbiIsIndyYXBwZXJPcmllbnRhdGlvbiIsImdldFdpbmRvd09yaWVudGF0aW9uIiwibGFzdEFsbG93ZWRJbWFnZSIsInBpeGVsUmF0aW8iLCJwYXJzZUZsb2F0Iiwid2luZG93T3JpZW50YXRpb24iLCJvcmllbnRhdGlvbiIsIk1hdGgiLCJtaW4iLCJ0ZW1wbGF0ZVJlcGxhY2VyIiwic3JjIiwiJGNvbnRhaW5lciIsImNob3NlbkltYWdlcyIsIm1hdGNoIiwia2V5IiwiaXNBcnJheSIsImNob3NlbiIsInB1c2giLCJpc1ZpZGVvU291cmNlIiwic291cmNlIiwidGVzdCIsImlzVmlkZW8iLCJzb3VyY2VzIiwiY2FsbGJhY2siLCJsYXN0Iiwic3RhcnRBdCIsImNvdW50IiwiYmF0Y2hTaXplIiwibmV4dCIsImNvdW50TG9hZGVkIiwibG9hZGVkIiwiSW1hZ2UiLCJjb21wbGV0ZSIsIm9uIiwicHJvY2Vzc0ltYWdlc0FycmF5IiwicHJvY2Vzc2VkIiwicHJvY2Vzc09wdGlvbnMiLCJyZXF1aXJlZCIsImNlbnRlcmVkWCIsImNlbnRlcmVkWSIsImNvbnNvbGUiLCJsb2ciLCJzcGVlZCIsInJlc29sdXRpb25DaGFuZ2VSYXRpb1RyZXNob2xkIiwiZmFkZUZpcnN0IiwiZmFkZSIsInNjYWxlIiwidmFsaWRTY2FsZSIsInByb2Nlc3NBbGlnbk9wdGlvbnMiLCJpc05hTiIsIlNVUFBPUlRFRF9TQ0FMRV9PUFRJT05TIiwiY292ZXIiLCJmaXQiLCJmaXQtc21hbGxlciIsImZpbGwiLCJjb250YWluZXIiLCJmaXJzdFNob3ciLCJpc0JvZHkiLCJkb2N1bWVudCIsImJvZHkiLCIkd2luZG93IiwiJHJvb3QiLCJzdXBwb3J0c0ZpeGVkUG9zaXRpb24iLCJvcmlnaW5hbEltYWdlcyIsImFsd2F5c1Rlc3RXaW5kb3dSZXNvbHV0aW9uIiwiJGV4aXN0aW5nIiwiY2hpbGRyZW4iLCJmaXJzdCIsIiR3cmFwIiwiYnlwYXNzQ3NzIiwiYXBwZW5kVG8iLCJpbmRleCIsInNob3ciLCJwcm94eSIsInJlc2l6ZSIsInBhZ2VZT2Zmc2V0IiwiJHJlc1Rlc3QiLCJuZXdDb250YWluZXJXaWR0aCIsIm5ld0NvbnRhaW5lckhlaWdodCIsImNoYW5nZVJhdGlvVyIsIl9sYXN0UmVzaXplQ29udGFpbmVyV2lkdGgiLCJjaGFuZ2VSYXRpb0giLCJfbGFzdFJlc2l6ZUNvbnRhaW5lckhlaWdodCIsImFicyIsIl9jdXJyZW50SW1hZ2UiLCJ0aGF0IiwiY2xlYXJUaW1lb3V0IiwiX3NlbGVjdEFub3RoZXJSZXNvbHV0aW9uVGltZW91dCIsInNldFRpbWVvdXQiLCJiZ0NTUyIsInJpZ2h0IiwiYm90dG9tIiwiYm94V2lkdGgiLCJpbm5lcldpZHRoIiwiYm94SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJuYXR1cmFsV2lkdGgiLCIkaXRlbVdyYXBwZXIiLCJuYXR1cmFsSGVpZ2h0IiwicmF0aW8iLCJib3hSYXRpbyIsImZsb29yIiwibWF4IiwiZmluZCIsIm5vdCIsImV2dCIsIkV2ZW50IiwicmVsYXRlZFRhcmdldCIsInRyaWdnZXIiLCJlcnIiLCJuZXdJbmRleCIsIm92ZXJyaWRlT3B0aW9ucyIsIiRvbGRJdGVtV3JhcHBlciIsImFkZENsYXNzIiwib2xkVmlkZW9XcmFwcGVyIiwidmlkZW9XcmFwcGVyIiwiZXZ0T3B0aW9ucyIsInNlbGVjdGVkSW1hZ2UiLCJfY3ljbGVUaW1lb3V0IiwiJGl0ZW0iLCJWaWRlb1dyYXBwZXIiLCIkdmlkZW8iLCJhcHBlbmQiLCJiaW5kIiwiZSIsIiR3cmFwcGVyIiwicGFyZW50IiwiaW1nV2lkdGgiLCJ2aWRlb1dpZHRoIiwiaW1nSGVpZ2h0IiwidmlkZW9IZWlnaHQiLCJnZXRPcHRpb24iLCJvcHQiLCJ0cmFuc2l0aW9uRWFzaW5nIiwiYnJpbmdJbk5leHRJbWFnZSIsInN0b3AiLCJyZW1vdmUiLCJjeWNsZSIsInBsYXkiLCJpbmRleE9mIiwic3BsaXQiLCJyb3VuZCIsInJhbmRvbSIsIiRuZXciLCIkb2xkIiwidG9TdHJpbmciLCJ0b0xvd2VyQ2FzZSIsImZhZGVJbiIsImVhc2luZyIsImZhZGVJbk5ldyIsImZhZGVPdXQiLCJ0cmFuc2l0aW9uUGFydHMiLCJhbmltUHJvcCIsIm5ld0Nzc1N0YXJ0IiwibmV3Q3NzQW5pbSIsImFuaW1hdGUiLCJvbGRDc3NBbmltIiwicGVyZm9ybVRyYW5zaXRpb24iLCJuZXciLCJvbGQiLCJhdHRyIiwiYWx0IiwiY3VycmVudCIsInVuc2hpZnQiLCJwcmV2IiwicGF1c2UiLCJyZXN1bWUiLCJjYWxsTmV4dCIsIm9mZiIsImxvb3AiLCJsYXN0RnJhbWVUaW1lb3V0IiwicGxheWVyIiwiZ2V0RHVyYXRpb24iLCJnZXRDdXJyZW50VGltZSIsInByZXNlcnZlQmFja2dyb3VuZCIsInJlbW92ZURhdGEiLCJpbml0Iiwic2V0VmlkZW9FbGVtZW50IiwidmlkZW8iLCJ2aWRlb1R5cGUiLCJ0eXBlIiwibG9hZFlvdXR1YmVBUEkiLCJ5dElkIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwibG9jYXRpb24iLCJvcmlnaW4iLCJfX3l0U3RhcnRNdXRlZCIsIm11dGUiLCJzcmNfdG9fbG9hZCIsIl9fbWFudWFsbHlTdG9wcGVkIiwieXRSZWFkeSIsIl9pbml0WW91dHViZSIsIm9uZSIsInByb3AiLCJwb3N0ZXIiLCJzb3VyY2VJdGVtIiwiY2FuUGxheVR5cGUiLCJZVCIsInJlbW92ZUF0dHIiLCJoYXNQYXJlbnQiLCJwYXJlbnROb2RlIiwiJHRtcFBhcmVudCIsIlBsYXllciIsImV2ZW50cyIsIm9uUmVhZHkiLCJkZXRhY2giLCJfdXBkYXRlWW91dHViZVNpemUiLCJvblN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJQbGF5ZXJTdGF0ZSIsIlBMQVlJTkciLCJFTkRFRCIsIlBBVVNFRCIsIkJVRkZFUklORyIsIkNVRUQiLCJvblBsYXliYWNrUXVhbGl0eUNoYW5nZSIsIm9uRXJyb3IiLCJoYXNFcnJvciIsInl0UGxheWVyIiwiZ2V0UGxheWJhY2tRdWFsaXR5IiwicGxheVZpZGVvIiwicGF1c2VWaWRlbyIsInNlZWtUbyIsImN1cnJlbnRUaW1lIiwic2Vjb25kcyIsInNldEN1cnJlbnRUaW1lIiwieXRBUElMb2FkSW50Iiwic2V0SW50ZXJ2YWwiLCJ1YSIsInBsYXRmb3JtIiwid2ttYXRjaCIsIndrdmVyc2lvbiIsImZmbWF0Y2giLCJmZnZlcnNpb24iLCJvcGVyYW1tb2JpbGVtYXRjaCIsIm9tdmVyc2lvbiIsImllbWF0Y2giLCJpZXZlcnNpb24iLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsInNjcmVlbiIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm9wZXJhbWluaSIsImpRdWVyeSIsInJlYWR5IiwiaGFzaCIsInByZXZlbnREZWZhdWx0Iiwib2Zmc2V0Il0sIm1hcHBpbmdzIjoiQ0FRQSxTQUFBQSxFQUFBQyxFQUFBQyxHQUNBLGFBR0EsSUFBQUMsRUFBQSw2SEFLQUgsRUFBQUksR0FBQUMsWUFBQSxTQUFBQyxFQUFBQyxHQUNBLElBVUFDLEVBVkFDLEVBQUFDLFVBMkRBLE9BckRBLElBQUFWLEVBQUFDLEdBQUFVLGFBQ0FWLEVBQUFXLFNBQUEsRUFBQSxHQUtBQyxLQUFBQyxLQUFBLFNBQUFDLEdBQ0EsSUFBQUMsRUFBQWhCLEVBQUFhLE1BQ0FJLEVBQUFELEVBQUFFLEtBQUEsZUFHQSxHQUFBRCxFQUFBLENBR0EsR0FBQSxpQkFBQVIsRUFBQSxJQUNBLG1CQUFBUSxFQUFBUixFQUFBLElBQUEsQ0FHQSxJQUFBVSxFQUFBRixFQUFBUixFQUFBLElBQUFXLE1BQUFILEVBQUFJLE1BQUFDLFVBQUFDLE1BQUFDLEtBQUFmLEVBQUEsSUFTQSxPQVJBVSxJQUFBRixJQUNBRSxFQUFBakIsUUFFQWlCLElBQUFqQixLQUNBTSxFQUFBQSxHQUFBLElBQ0FPLEdBQUFJLElBT0FaLEVBQUFQLEVBQUF5QixPQUFBUixFQUFBVixRQUFBQSxHQUdBVSxFQUFBUyxlQUFBLFlBQ0FULEVBQUFVLFNBQUEsR0FL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dHJldGNoXG4gKiBodHRwOi8vc3JvYmJpbi5jb20vanF1ZXJ5LXBsdWdpbnMvYmFja3N0cmV0Y2gvXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEzIFNjb3R0IFJvYmJpblxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICovXG5cbjsoZnVuY3Rpb24gKCQsIHdpbmRvdywgdW5kZWZpbmVkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiogQGNvbnN0ICovXG4gIHZhciBZT1VUVUJFX1JFR0VYUCA9IC9eLiooeW91dHVcXC5iZVxcL3x5b3V0dWJlXFwuY29tXFwvdlxcL3x5b3V0dWJlXFwuY29tXFwvZW1iZWRcXC98eW91dHViZVxcLmNvbVxcL3dhdGNoXFw/dj18eW91dHViZVxcLmNvbVxcL3dhdGNoXFw/LipcXCZ2PSkoW14jXFwmXFw/XSopLiovaTtcbiAgXG4gIC8qIFBMVUdJTiBERUZJTklUSU9OXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuICAkLmZuLmJhY2tzdHJldGNoID0gZnVuY3Rpb24gKGltYWdlcywgb3B0aW9ucykge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG4gICAgLypcbiAgICAgKiBTY3JvbGwgdGhlIHBhZ2Ugb25lIHBpeGVsIHRvIGdldCB0aGUgcmlnaHQgd2luZG93IGhlaWdodCBvbiBpT1NcbiAgICAgKiBQcmV0dHkgaGFybWxlc3MgZm9yIGV2ZXJ5b25lIGVsc2VcbiAgICAqL1xuICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPT09IDAgKSB7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgfVxuXG4gICAgdmFyIHJldHVyblZhbHVlcztcbiAgICBcbiAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVhY2hJbmRleCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKVxuICAgICAgICAsIG9iaiA9ICR0aGlzLmRhdGEoJ2JhY2tzdHJldGNoJyk7XG5cbiAgICAgIC8vIERvIHdlIGFscmVhZHkgaGF2ZSBhbiBpbnN0YW5jZSBhdHRhY2hlZCB0byB0aGlzIGVsZW1lbnQ/XG4gICAgICBpZiAob2JqKSB7XG5cbiAgICAgICAgLy8gSXMgdGhpcyBhIG1ldGhvZCB0aGV5J3JlIHRyeWluZyB0byBleGVjdXRlP1xuICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnICYmXG4gICAgICAgICAgICB0eXBlb2Ygb2JqW2FyZ3NbMF1dID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgIC8vIENhbGwgdGhlIG1ldGhvZFxuICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IG9ialthcmdzWzBdXS5hcHBseShvYmosIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDEpKTtcbiAgICAgICAgICBpZiAocmV0dXJuVmFsdWUgPT09IG9iaikgeyAvLyBJZiBhIG1ldGhvZCBpcyBjaGFpbmluZ1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZXMgPSByZXR1cm5WYWx1ZXMgfHwgW107XG4gICAgICAgICAgICByZXR1cm5WYWx1ZXNbZWFjaEluZGV4XSA9IHJldHVyblZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICByZXR1cm47IC8vIE5vdGhpbmcgZnVydGhlciB0byBkb1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWVyZ2UgdGhlIG9sZCBvcHRpb25zIHdpdGggdGhlIG5ld1xuICAgICAgICBvcHRpb25zID0gJC5leHRlbmQob2JqLm9wdGlvbnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgb2xkIGluc3RhbmNlXG4gICAgICAgIGlmICggb2JqLmhhc093blByb3BlcnR5KCdkZXN0cm95JykgKSB7XG4gICAgICAgICAgb2JqLmRlc3Ryb3kodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2UgbmVlZCBhdCBsZWFzdCBvbmUgaW1hZ2VcbiAgICAgIGlmICghaW1hZ2VzIHx8IChpbWFnZXMgJiYgaW1hZ2VzLmxlbmd0aCA9PT0gMCkpIHtcbiAgICAgICAgdmFyIGNzc0JhY2tncm91bmRJbWFnZSA9ICR0aGlzLmNzcygnYmFja2dyb3VuZC1pbWFnZScpO1xuICAgICAgICBpZiAoY3NzQmFja2dyb3VuZEltYWdlICYmIGNzc0JhY2tncm91bmRJbWFnZSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgaW1hZ2VzID0gWyB7IHVybDogJHRoaXMuY3NzKCdiYWNrZ3JvdW5kSW1hZ2UnKS5yZXBsYWNlKC91cmxcXCh8XFwpfFwifCcvZyxcIlwiKSB9IF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJC5lcnJvcignTm8gaW1hZ2VzIHdlcmUgc3VwcGxpZWQgZm9yIEJhY2tzdHJldGNoLCBvciBlbGVtZW50IG11c3QgaGF2ZSBhIENTUy1kZWZpbmVkIGJhY2tncm91bmQgaW1hZ2UuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgb2JqID0gbmV3IEJhY2tzdHJldGNoKHRoaXMsIGltYWdlcywgb3B0aW9ucyB8fCB7fSk7XG4gICAgICAkdGhpcy5kYXRhKCdiYWNrc3RyZXRjaCcsIG9iaik7XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJldHVyblZhbHVlcyA/IHJldHVyblZhbHVlcy5sZW5ndGggPT09IDEgPyByZXR1cm5WYWx1ZXNbMF0gOiByZXR1cm5WYWx1ZXMgOiB0aGlzO1xuICB9O1xuXG4gIC8vIElmIG5vIGVsZW1lbnQgaXMgc3VwcGxpZWQsIHdlJ2xsIGF0dGFjaCB0byBib2R5XG4gICQuYmFja3N0cmV0Y2ggPSBmdW5jdGlvbiAoaW1hZ2VzLCBvcHRpb25zKSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnN0YW5jZVxuICAgIHJldHVybiAkKCdib2R5JylcbiAgICAgICAgICAgIC5iYWNrc3RyZXRjaChpbWFnZXMsIG9wdGlvbnMpXG4gICAgICAgICAgICAuZGF0YSgnYmFja3N0cmV0Y2gnKTtcbiAgfTtcblxuICAvLyBDdXN0b20gc2VsZWN0b3JcbiAgJC5leHByWyc6J10uYmFja3N0cmV0Y2ggPSBmdW5jdGlvbihlbGVtKSB7XG4gICAgcmV0dXJuICQoZWxlbSkuZGF0YSgnYmFja3N0cmV0Y2gnKSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIC8qIERFRkFVTFRTXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuICAkLmZuLmJhY2tzdHJldGNoLmRlZmF1bHRzID0ge1xuICAgIGR1cmF0aW9uOiA1MDAwICAgICAgICAgICAgICAgIC8vIEFtb3VudCBvZiB0aW1lIGluIGJldHdlZW4gc2xpZGVzIChpZiBzbGlkZXNob3cpXG4gICAgLCB0cmFuc2l0aW9uOiAnZmFkZScgICAgICAgICAgLy8gVHlwZSBvZiB0cmFuc2l0aW9uIGJldHdlZW4gc2xpZGVzXG4gICAgLCB0cmFuc2l0aW9uRHVyYXRpb246IDAgICAgICAgLy8gRHVyYXRpb24gb2YgdHJhbnNpdGlvbiBiZXR3ZWVuIHNsaWRlc1xuICAgICwgYW5pbWF0ZUZpcnN0OiB0cnVlICAgICAgICAgIC8vIEFuaW1hdGUgdGhlIHRyYW5zaXRpb24gb2YgZmlyc3QgaW1hZ2Ugb2Ygc2xpZGVzaG93IGluP1xuICAgICwgYWxpZ25YOiAwLjUgICAgICAgICAgICAgICAgIC8vIFRoZSB4LWFsaWdubWVudCBmb3IgdGhlIGltYWdlLCBjYW4gYmUgJ2xlZnQnfCdjZW50ZXInfCdyaWdodCcgb3IgYW55IG51bWJlciBiZXR3ZWVuIDAuMCBhbmQgMS4wXG4gICAgLCBhbGlnblk6IDAuNSAgICAgICAgICAgICAgICAgLy8gVGhlIHktYWxpZ25tZW50IGZvciB0aGUgaW1hZ2UsIGNhbiBiZSAndG9wJ3wnY2VudGVyJ3wnYm90dG9tJyBvciBhbnkgbnVtYmVyIGJldHdlZW4gMC4wIGFuZCAxLjBcbiAgICAsIHBhdXNlZDogZmFsc2UgICAgICAgICAgICAgICAvLyBXaGV0aGVyIHRoZSBpbWFnZXMgc2hvdWxkIHNsaWRlIGFmdGVyIGdpdmVuIGR1cmF0aW9uXG4gICAgLCBzdGFydDogMCAgICAgICAgICAgICAgICAgICAgLy8gSW5kZXggb2YgdGhlIGZpcnN0IGltYWdlIHRvIHNob3dcbiAgICAsIHByZWxvYWQ6IDIgICAgICAgICAgICAgICAgICAvLyBIb3cgbWFueSBpbWFnZXMgcHJlbG9hZCBhdCBhIHRpbWU/XG4gICAgLCBwcmVsb2FkU2l6ZTogMSAgICAgICAgICAgICAgLy8gSG93IG1hbnkgaW1hZ2VzIGNhbiB3ZSBwcmVsb2FkIGluIHBhcmFsbGVsP1xuICAgICwgcmVzb2x1dGlvblJlZnJlc2hSYXRlOiAyNTAwIC8vIEhvdyBsb25nIHRvIHdhaXQgYmVmb3JlIHN3aXRjaGluZyByZXNvbHV0aW9uP1xuICAgICwgcmVzb2x1dGlvbkNoYW5nZVJhdGlvVGhyZXNob2xkOiAwLjEgLy8gSG93IG11Y2ggYSBjaGFuZ2Ugc2hvdWxkIGl0IGJlIGJlZm9yZSBzd2l0Y2hpbmcgcmVzb2x1dGlvbj9cbiAgfTtcblxuICAvKiBTVFlMRVNcbiAgICpcbiAgICogQmFrZWQtaW4gc3R5bGVzIHRoYXQgd2UnbGwgYXBwbHkgdG8gb3VyIGVsZW1lbnRzLlxuICAgKiBJbiBhbiBlZmZvcnQgdG8ga2VlcCB0aGUgcGx1Z2luIHNpbXBsZSwgdGhlc2UgYXJlIG5vdCBleHBvc2VkIGFzIG9wdGlvbnMuXG4gICAqIFRoYXQgc2FpZCwgYW55b25lIGNhbiBvdmVycmlkZSB0aGVzZSBpbiB0aGVpciBvd24gc3R5bGVzaGVldC5cbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuICB2YXIgc3R5bGVzID0ge1xuICAgIHdyYXA6IHtcbiAgICAgIGxlZnQ6IDBcbiAgICAgICwgdG9wOiAwXG4gICAgICAsIG92ZXJmbG93OiAnaGlkZGVuJ1xuICAgICAgLCBtYXJnaW46IDBcbiAgICAgICwgcGFkZGluZzogMFxuICAgICAgLCBoZWlnaHQ6ICcxMDAlJ1xuICAgICAgLCB3aWR0aDogJzEwMCUnXG4gICAgICAsIHpJbmRleDogLTk5OTk5OVxuICAgIH1cbiAgICAsIGl0ZW1XcmFwcGVyOiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgLCBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICwgbWFyZ2luOiAwXG4gICAgICAsIHBhZGRpbmc6IDBcbiAgICAgICwgYm9yZGVyOiAnbm9uZSdcbiAgICAgICwgd2lkdGg6ICcxMDAlJ1xuICAgICAgLCBoZWlnaHQ6ICcxMDAlJ1xuICAgICAgLCB6SW5kZXg6IC05OTk5OTlcbiAgICB9XG4gICAgLCBpdGVtOiB7XG4gICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJ1xuICAgICAgLCBtYXJnaW46IDBcbiAgICAgICwgcGFkZGluZzogMFxuICAgICAgLCBib3JkZXI6ICdub25lJ1xuICAgICAgLCB3aWR0aDogJzEwMCUnXG4gICAgICAsIGhlaWdodDogJzEwMCUnXG4gICAgICAsIG1heFdpZHRoOiAnbm9uZSdcbiAgICB9XG4gIH07XG5cbiAgLyogR2l2ZW4gYW4gYXJyYXkgb2YgZGlmZmVyZW50IG9wdGlvbnMgZm9yIGFuIGltYWdlLFxuICAgKiBjaG9vc2UgdGhlIG9wdGltYWwgaW1hZ2UgZm9yIHRoZSBjb250YWluZXIgc2l6ZS5cbiAgICpcbiAgICogR2l2ZW4gYW4gaW1hZ2UgdGVtcGxhdGUgKGEgc3RyaW5nIHdpdGgge3sgd2lkdGggfX0gYW5kL29yXG4gICAqIHt7aGVpZ2h0fX0gaW5zaWRlKSBhbmQgYSBjb250YWluZXIgb2JqZWN0LCByZXR1cm5zIHRoZVxuICAgKiBpbWFnZSB1cmwgd2l0aCB0aGUgZXhhY3QgdmFsdWVzIGZvciB0aGUgc2l6ZSBvZiB0aGF0XG4gICAqIGNvbnRhaW5lci5cbiAgICpcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiB1cmxzIG9wdGltaXplZCBmb3IgdGhlIHNwZWNpZmllZCByZXNvbHV0aW9uLlxuICAgKlxuICAgKi9cbiAgdmFyIG9wdGltYWxTaXplSW1hZ2VzID0gKGZ1bmN0aW9uICgpIHtcblxuICAgIC8qIFNvcnRzIHRoZSBhcnJheSBvZiBpbWFnZSBzaXplcyBiYXNlZCBvbiB3aWR0aCAqL1xuICAgIHZhciB3aWR0aEluc2VydFNvcnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG1wID0gYXJyW2ldLFxuICAgICAgICAgICAgaiA9IGk7XG4gICAgICAgIHdoaWxlIChhcnJbaiAtIDFdICYmIHBhcnNlSW50KGFycltqIC0gMV0ud2lkdGgsIDEwKSA+IHBhcnNlSW50KHRtcC53aWR0aCwgMTApKSB7XG4gICAgICAgICAgYXJyW2pdID0gYXJyW2ogLSAxXTtcbiAgICAgICAgICAtLWo7XG4gICAgICAgIH1cbiAgICAgICAgYXJyW2pdID0gdG1wO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyO1xuICAgIH07XG5cbiAgICAvKiBHaXZlbiBhbiBhcnJheSBvZiB2YXJpb3VzIHNpemVzIG9mIHRoZSBzYW1lIGltYWdlIGFuZCBhIGNvbnRhaW5lciB3aWR0aCxcbiAgICAgKiByZXR1cm4gdGhlIGJlc3QgaW1hZ2UuXG4gICAgICovXG4gICAgdmFyIHNlbGVjdEJlc3QgPSBmdW5jdGlvbiAoY29udGFpbmVyV2lkdGgsIGNvbnRhaW5lckhlaWdodCwgaW1hZ2VTaXplcykge1xuXG4gICAgICB2YXIgZGV2aWNlUGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7XG4gICAgICB2YXIgZGV2aWNlT3JpZW50YXRpb24gPSBnZXREZXZpY2VPcmllbnRhdGlvbigpO1xuICAgICAgdmFyIHdpbmRvd09yaWVudGF0aW9uID0gZ2V0V2luZG93T3JpZW50YXRpb24oKTtcbiAgICAgIHZhciB3cmFwcGVyT3JpZW50YXRpb24gPSAoY29udGFpbmVySGVpZ2h0ID4gY29udGFpbmVyV2lkdGgpID9cbiAgICAgICAgJ3BvcnRyYWl0JyA6XG4gICAgICAgIChjb250YWluZXJXaWR0aCA+IGNvbnRhaW5lckhlaWdodCA/ICdsYW5kc2NhcGUnIDogJ3NxdWFyZScpO1xuXG4gICAgICB2YXIgbGFzdEFsbG93ZWRJbWFnZSA9IDA7XG4gICAgICB2YXIgdGVzdFdpZHRoO1xuXG4gICAgICBmb3IgKHZhciBqID0gMCwgaW1hZ2U7IGogPCBpbWFnZVNpemVzLmxlbmd0aDsgaisrKSB7XG5cbiAgICAgICAgICBpbWFnZSA9IGltYWdlU2l6ZXNbal07XG5cbiAgICAgICAgICAvLyBJbiBjYXNlIGEgbmV3IGltYWdlIHdhcyBwdXNoZWQgaW4sIHByb2Nlc3MgaXQ6XG4gICAgICAgICAgaWYgKHR5cGVvZiBpbWFnZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgaW1hZ2UgPSBpbWFnZVNpemVzW2pdID0geyB1cmw6IGltYWdlIH07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGltYWdlLnBpeGVsUmF0aW8gJiYgaW1hZ2UucGl4ZWxSYXRpbyAhPT0gJ2F1dG8nICYmIHBhcnNlRmxvYXQoaW1hZ2UucGl4ZWxSYXRpbykgIT09IGRldmljZVBpeGVsUmF0aW8pIHtcbiAgICAgICAgICAgICAgLy8gV2UgZGlzYWxsb3dlZCBjaG9vc2luZyB0aGlzIGltYWdlIGZvciBjdXJyZW50IGRldmljZSBwaXhlbCByYXRpbyxcbiAgICAgICAgICAgICAgLy8gU28gc2tpcCB0aGlzIG9uZS5cbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGltYWdlLmRldmljZU9yaWVudGF0aW9uICYmIGltYWdlLmRldmljZU9yaWVudGF0aW9uICE9PSBkZXZpY2VPcmllbnRhdGlvbikge1xuICAgICAgICAgICAgICAvLyBXZSBkaXNhbGxvd2VkIGNob29zaW5nIHRoaXMgaW1hZ2UgZm9yIGN1cnJlbnQgZGV2aWNlIG9yaWVudGF0aW9uLFxuICAgICAgICAgICAgICAvLyBTbyBza2lwIHRoaXMgb25lLlxuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaW1hZ2Uud2luZG93T3JpZW50YXRpb24gJiYgaW1hZ2Uud2luZG93T3JpZW50YXRpb24gIT09IGRldmljZU9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRpc2FsbG93ZWQgY2hvb3NpbmcgdGhpcyBpbWFnZSBmb3IgY3VycmVudCB3aW5kb3cgb3JpZW50YXRpb24sXG4gICAgICAgICAgICAgIC8vIFNvIHNraXAgdGhpcyBvbmUuXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbWFnZS5vcmllbnRhdGlvbiAmJiBpbWFnZS5vcmllbnRhdGlvbiAhPT0gd3JhcHBlck9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgIC8vIFdlIGRpc2FsbG93ZWQgY2hvb3NpbmcgdGhpcyBpbWFnZSBmb3IgY3VycmVudCBlbGVtZW50J3Mgb3JpZW50YXRpb24sXG4gICAgICAgICAgICAgIC8vIFNvIHNraXAgdGhpcyBvbmUuXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1hcmsgdGhpcyBvbmUgYXMgdGhlIGxhc3Qgb25lIHdlIGludmVzdGlnYXRlZFxuICAgICAgICAgIC8vIHdoaWNoIGRvZXMgbm90IHZpb2xhdGUgZGV2aWNlIHBpeGVsIHJhdGlvIHJ1bGVzLlxuICAgICAgICAgIC8vIFdlIG1heSBjaG9vc2UgdGhpcyBvbmUgbGF0ZXIgaWYgdGhlcmUncyBubyBtYXRjaC5cbiAgICAgICAgICBsYXN0QWxsb3dlZEltYWdlID0gajtcblxuICAgICAgICAgIC8vIEZvciBtb3N0IGltYWdlcywgd2UgbWF0Y2ggdGhlIHNwZWNpZmllZCB3aWR0aCBhZ2FpbnN0IGVsZW1lbnQgd2lkdGgsXG4gICAgICAgICAgLy8gQW5kIGVuZm9yY2luZyBhIGxpbWl0IGRlcGVuZGluZyBvbiB0aGUgXCJwaXhlbFJhdGlvXCIgcHJvcGVydHkgaWYgc3BlY2lmaWVkLlxuICAgICAgICAgIC8vIEJ1dCBpZiBhIHBpeGVsUmF0aW89XCJhdXRvXCIsIHRoZW4gd2UgY29uc2lkZXIgdGhlIHdpZHRoIGFzIHRoZSBwaHlzaWNhbCB3aWR0aCBvZiB0aGUgaW1hZ2UsXG4gICAgICAgICAgLy8gQW5kIG1hdGNoIGl0IHdoaWxlIGNvbnNpZGVyaW5nIHRoZSBkZXZpY2UncyBwaXhlbCByYXRpby5cbiAgICAgICAgICB0ZXN0V2lkdGggPSBjb250YWluZXJXaWR0aDtcbiAgICAgICAgICBpZiAoaW1hZ2UucGl4ZWxSYXRpbyA9PT0gJ2F1dG8nKSB7XG4gICAgICAgICAgICAgIGNvbnRhaW5lcldpZHRoICo9IGRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gU3RvcCB3aGVuIHRoZSB3aWR0aCBvZiB0aGUgaW1hZ2UgaXMgbGFyZ2VyIG9yIGVxdWFsIHRvIHRoZSBjb250YWluZXIgd2lkdGhcbiAgICAgICAgICBpZiAoaW1hZ2Uud2lkdGggPj0gdGVzdFdpZHRoKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gVXNlIHRoZSBpbWFnZSBsb2NhdGVkIGF0IHdoZXJlIHdlIHN0b3BwZWRcbiAgICAgIHJldHVybiBpbWFnZVNpemVzW01hdGgubWluKGosIGxhc3RBbGxvd2VkSW1hZ2UpXTtcbiAgICB9O1xuICAgIFxuICAgIHZhciByZXBsYWNlVGFnc0luVXJsID0gZnVuY3Rpb24gKHVybCwgdGVtcGxhdGVSZXBsYWNlcikge1xuICAgICAgICBcbiAgICAgICAgaWYgKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgve3sod2lkdGh8aGVpZ2h0KX19L2csIHRlbXBsYXRlUmVwbGFjZXIpO1xuICAgICAgICB9IGVsc2UgaWYgKHVybCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVybC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh1cmxbaV0uc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIHVybFtpXS5zcmMgPSByZXBsYWNlVGFnc0luVXJsKHVybFtpXS5zcmMsIHRlbXBsYXRlUmVwbGFjZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVybFtpXSA9IHJlcGxhY2VUYWdzSW5VcmwodXJsW2ldLCB0ZW1wbGF0ZVJlcGxhY2VyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoJGNvbnRhaW5lciwgaW1hZ2VzKSB7XG4gICAgICB2YXIgY29udGFpbmVyV2lkdGggPSAkY29udGFpbmVyLndpZHRoKCksXG4gICAgICAgICAgY29udGFpbmVySGVpZ2h0ID0gJGNvbnRhaW5lci5oZWlnaHQoKTtcblxuICAgICAgdmFyIGNob3NlbkltYWdlcyA9IFtdO1xuXG4gICAgICB2YXIgdGVtcGxhdGVSZXBsYWNlciA9IGZ1bmN0aW9uIChtYXRjaCwga2V5KSB7XG4gICAgICAgIGlmIChrZXkgPT09ICd3aWR0aCcpIHtcbiAgICAgICAgICByZXR1cm4gY29udGFpbmVyV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleSA9PT0gJ2hlaWdodCcpIHtcbiAgICAgICAgICByZXR1cm4gY29udGFpbmVySGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICAgIH07XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICgkLmlzQXJyYXkoaW1hZ2VzW2ldKSkge1xuICAgICAgICAgIGltYWdlc1tpXSA9IHdpZHRoSW5zZXJ0U29ydChpbWFnZXNbaV0pO1xuICAgICAgICAgIHZhciBjaG9zZW4gPSBzZWxlY3RCZXN0KGNvbnRhaW5lcldpZHRoLCBjb250YWluZXJIZWlnaHQsIGltYWdlc1tpXSk7XG4gICAgICAgICAgY2hvc2VuSW1hZ2VzLnB1c2goY2hvc2VuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJbiBjYXNlIGEgbmV3IGltYWdlIHdhcyBwdXNoZWQgaW4sIHByb2Nlc3MgaXQ6XG4gICAgICAgICAgaWYgKHR5cGVvZiBpbWFnZXNbaV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGltYWdlc1tpXSA9IHsgdXJsOiBpbWFnZXNbaV0gfTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgaXRlbSA9ICQuZXh0ZW5kKHt9LCBpbWFnZXNbaV0pO1xuICAgICAgICAgIGl0ZW0udXJsID0gcmVwbGFjZVRhZ3NJblVybChpdGVtLnVybCwgdGVtcGxhdGVSZXBsYWNlcik7XG4gICAgICAgICAgY2hvc2VuSW1hZ2VzLnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjaG9zZW5JbWFnZXM7XG4gICAgfTtcblxuICB9KSgpO1xuICBcbiAgdmFyIGlzVmlkZW9Tb3VyY2UgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgcmV0dXJuIFlPVVRVQkVfUkVHRVhQLnRlc3Qoc291cmNlLnVybCkgfHwgc291cmNlLmlzVmlkZW87XG4gIH07XG5cbiAgLyogUHJlbG9hZCBpbWFnZXMgKi9cbiAgdmFyIHByZWxvYWQgPSAoZnVuY3Rpb24gKHNvdXJjZXMsIHN0YXJ0QXQsIGNvdW50LCBiYXRjaFNpemUsIGNhbGxiYWNrKSB7XG4gICAgLy8gUGx1Z2luIGNhY2hlXG4gICAgdmFyIGNhY2hlID0gW107XG5cbiAgICAvLyBXcmFwcGVyIGZvciBjYWNoZVxuICAgIHZhciBjYWNoaW5nID0gZnVuY3Rpb24oaW1hZ2Upe1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoY2FjaGVbaV0uc3JjID09PSBpbWFnZS5zcmMpIHtcbiAgICAgICAgICByZXR1cm4gY2FjaGVbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNhY2hlLnB1c2goaW1hZ2UpO1xuICAgICAgcmV0dXJuIGltYWdlO1xuICAgIH07XG5cbiAgICAvLyBFeGVjdXRlIGNhbGxiYWNrXG4gICAgdmFyIGV4ZWMgPSBmdW5jdGlvbihzb3VyY2VzLCBjYWxsYmFjaywgbGFzdCl7XG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwoc291cmNlcywgbGFzdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIENsb3N1cmUgdG8gaGlkZSBjYWNoZVxuICAgIHJldHVybiBmdW5jdGlvbiBwcmVsb2FkIChzb3VyY2VzLCBzdGFydEF0LCBjb3VudCwgYmF0Y2hTaXplLCBjYWxsYmFjayl7XG4gICAgICAvLyBDaGVjayBpbnB1dCBkYXRhXG4gICAgICBpZiAodHlwZW9mIHNvdXJjZXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghJC5pc0FycmF5KHNvdXJjZXMpKSB7XG4gICAgICAgIHNvdXJjZXMgPSBbc291cmNlc107XG4gICAgICB9XG5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgNSAmJiB0eXBlb2YgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG4gICAgICB9XG5cbiAgICAgIHN0YXJ0QXQgPSAodHlwZW9mIHN0YXJ0QXQgPT09ICdmdW5jdGlvbicgfHwgIXN0YXJ0QXQpID8gMCA6IHN0YXJ0QXQ7XG4gICAgICBjb3VudCA9ICh0eXBlb2YgY291bnQgPT09ICdmdW5jdGlvbicgfHwgIWNvdW50IHx8IGNvdW50IDwgMCkgPyBzb3VyY2VzLmxlbmd0aCA6IE1hdGgubWluKGNvdW50LCBzb3VyY2VzLmxlbmd0aCk7XG4gICAgICBiYXRjaFNpemUgPSAodHlwZW9mIGJhdGNoU2l6ZSA9PT0gJ2Z1bmN0aW9uJyB8fCAhYmF0Y2hTaXplKSA/IDEgOiBiYXRjaFNpemU7XG5cbiAgICAgIGlmIChzdGFydEF0ID49IHNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgICAgc3RhcnRBdCA9IDA7XG4gICAgICAgICAgY291bnQgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKGJhdGNoU2l6ZSA8IDApIHtcbiAgICAgICAgICBiYXRjaFNpemUgPSBjb3VudDtcbiAgICAgIH1cbiAgICAgIGJhdGNoU2l6ZSA9IE1hdGgubWluKGJhdGNoU2l6ZSwgY291bnQpO1xuXG4gICAgICB2YXIgbmV4dCA9IHNvdXJjZXMuc2xpY2Uoc3RhcnRBdCArIGJhdGNoU2l6ZSwgY291bnQgLSBiYXRjaFNpemUpO1xuICAgICAgc291cmNlcyA9IHNvdXJjZXMuc2xpY2Uoc3RhcnRBdCwgYmF0Y2hTaXplKTtcbiAgICAgIGNvdW50ID0gc291cmNlcy5sZW5ndGg7XG5cbiAgICAgIC8vIElmIHNvdXJjZXMgYXJyYXkgaXMgZW1wdHlcbiAgICAgIGlmICghY291bnQpIHtcbiAgICAgICAgZXhlYyhzb3VyY2VzLCBjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gSW1hZ2UgbG9hZGluZyBjYWxsYmFja1xuICAgICAgdmFyIGNvdW50TG9hZGVkID0gMDtcblxuICAgICAgdmFyIGxvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb3VudExvYWRlZCsrO1xuICAgICAgICBpZiAoY291bnRMb2FkZWQgIT09IGNvdW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhlYyhzb3VyY2VzLCBjYWxsYmFjaywgIW5leHQpO1xuICAgICAgICBwcmVsb2FkKG5leHQsIDAsIDAsIGJhdGNoU2l6ZSwgY2FsbGJhY2spO1xuICAgICAgfTtcblxuICAgICAgLy8gTG9vcCBzb3VyY2VzIHRvIHByZWxvYWRcbiAgICAgIHZhciBpbWFnZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIFxuICAgICAgICBpZiAoaXNWaWRlb1NvdXJjZShzb3VyY2VzW2ldKSkge1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERvIG5vdCBwcmVsb2FkIHZpZGVvcy4gVGhlcmUgYXJlIGlzc3VlcyB3aXRoIHRoYXQuXG4gICAgICAgICAgLy8gRmlyc3QgLSB3ZSBuZWVkIHRvIGtlZXAgYW4gaW5zdGFuY2Ugb2YgdGhlIHByZWxvYWRlZCBhbmQgdXNlIHRoYXQgZXhhY3RseSwgbm90IGEgY29weS5cbiAgICAgICAgICAvLyBTZWNvbmQgLSB0aGVyZSBhcmUgbWVtb3J5IGlzc3Vlcy5cbiAgICAgICAgICAvLyBJZiB0aGVyZSB3aWxsIGJlIGEgcmVxdWlyZW1lbnQgZnJvbSB1c2VycyAtIEknbGwgdHJ5IHRvIGltcGxlbWVudCB0aGlzLlxuXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgIFxuICAgICAgICAgIGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgaW1hZ2Uuc3JjID0gc291cmNlc1tpXS51cmw7XG5cbiAgICAgICAgICBpbWFnZSA9IGNhY2hpbmcoaW1hZ2UpO1xuXG4gICAgICAgICAgaWYgKGltYWdlLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICBsb2FkZWQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChpbWFnZSkub24oJ2xvYWQgZXJyb3InLCBsb2FkZWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfVxuICAgIH07XG4gIH0pKCk7XG5cbiAgLyogUHJvY2VzcyBpbWFnZXMgYXJyYXkgKi9cbiAgdmFyIHByb2Nlc3NJbWFnZXNBcnJheSA9IGZ1bmN0aW9uIChpbWFnZXMpIHtcbiAgICB2YXIgcHJvY2Vzc2VkID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbWFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0eXBlb2YgaW1hZ2VzW2ldID09PSAnc3RyaW5nJykge1xuICAgICAgICBwcm9jZXNzZWQucHVzaCh7IHVybDogaW1hZ2VzW2ldIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoJC5pc0FycmF5KGltYWdlc1tpXSkpIHtcbiAgICAgICAgcHJvY2Vzc2VkLnB1c2gocHJvY2Vzc0ltYWdlc0FycmF5KGltYWdlc1tpXSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHByb2Nlc3NlZC5wdXNoKHByb2Nlc3NPcHRpb25zKGltYWdlc1tpXSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzc2VkO1xuICB9O1xuXG4gIC8qIFByb2Nlc3Mgb3B0aW9ucyAqL1xuICB2YXIgcHJvY2Vzc09wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucywgcmVxdWlyZWQpIHtcblxuICAgIC8vIENvbnZlcnQgb2xkIG9wdGlvbnNcblxuICAgIC8vIGNlbnRlcmVkWC9jZW50ZXJlZFkgYXJlIGRlcHJlY2F0ZWRcbiAgICBpZiAob3B0aW9ucy5jZW50ZXJlZFggfHwgb3B0aW9ucy5jZW50ZXJlZFkpIHtcbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcbiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCdqcXVlcnkuYmFja3N0cmV0Y2g6IGBjZW50ZXJlZFhgL2BjZW50ZXJlZFlgIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgYGFsaWduWGAvYGFsaWduWWAnKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcmVkWCkge1xuICAgICAgICBvcHRpb25zLmFsaWduWCA9IDAuNTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcmVkWSkge1xuICAgICAgICBvcHRpb25zLmFsaWduWSA9IDAuNTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZXByZWNhdGVkIHNwZWNcbiAgICBpZiAob3B0aW9ucy5zcGVlZCAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgIGlmICh3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cpIHtcbiAgICAgICAgd2luZG93LmNvbnNvbGUubG9nKCdqcXVlcnkuYmFja3N0cmV0Y2g6IGBzcGVlZGAgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBgdHJhbnNpdGlvbkR1cmF0aW9uYCcpO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zLnRyYW5zaXRpb25EdXJhdGlvbiA9IG9wdGlvbnMuc3BlZWQ7XG4gICAgICBvcHRpb25zLnRyYW5zaXRpb24gPSAnZmFkZSc7XG4gICAgfVxuXG4gICAgLy8gVHlwb1xuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb25DaGFuZ2VSYXRpb1RyZXNob2xkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHdpbmRvdy5jb25zb2xlLmxvZygnanF1ZXJ5LmJhY2tzdHJldGNoOiBgdHJlc2hvbGRgIGlzIGEgdHlwbyEnKTtcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbkNoYW5nZVJhdGlvVGhyZXNob2xkID0gb3B0aW9ucy5yZXNvbHV0aW9uQ2hhbmdlUmF0aW9UcmVzaG9sZDtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHNwZWMgdGhhdCBuZWVkcyBwcm9jZXNzaW5nXG5cbiAgICBpZiAob3B0aW9ucy5mYWRlRmlyc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgb3B0aW9ucy5hbmltYXRlRmlyc3QgPSBvcHRpb25zLmZhZGVGaXJzdDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5mYWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMudHJhbnNpdGlvbkR1cmF0aW9uID0gb3B0aW9ucy5mYWRlO1xuICAgICAgb3B0aW9ucy50cmFuc2l0aW9uID0gJ2ZhZGUnO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnNjYWxlKSB7XG4gICAgICBvcHRpb25zLnNjYWxlID0gdmFsaWRTY2FsZShvcHRpb25zLnNjYWxlKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHByb2Nlc3NBbGlnbk9wdGlvbnMob3B0aW9ucyk7XG4gIH07XG5cbiAgLyogUHJvY2VzcyBhbGlnbiBvcHRpb25zICovXG4gIHZhciBwcm9jZXNzQWxpZ25PcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMsIHJlcXVpcmVkKSB7XG4gICAgaWYgKG9wdGlvbnMuYWxpZ25YID09PSAnbGVmdCcpIHtcbiAgICAgIG9wdGlvbnMuYWxpZ25YID0gMC4wO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLmFsaWduWCA9PT0gJ2NlbnRlcicpIHtcbiAgICAgIG9wdGlvbnMuYWxpZ25YID0gMC41O1xuICAgIH1cbiAgICBlbHNlIGlmIChvcHRpb25zLmFsaWduWCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgb3B0aW9ucy5hbGlnblggPSAxLjA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKG9wdGlvbnMuYWxpZ25YICE9PSB1bmRlZmluZWQgfHwgcmVxdWlyZWQpIHtcbiAgICAgICAgb3B0aW9ucy5hbGlnblggPSBwYXJzZUZsb2F0KG9wdGlvbnMuYWxpZ25YKTtcbiAgICAgICAgaWYgKGlzTmFOKG9wdGlvbnMuYWxpZ25YKSkge1xuICAgICAgICAgIG9wdGlvbnMuYWxpZ25YID0gMC41O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuYWxpZ25ZID09PSAndG9wJykge1xuICAgICAgb3B0aW9ucy5hbGlnblkgPSAwLjA7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuYWxpZ25ZID09PSAnY2VudGVyJykge1xuICAgICAgb3B0aW9ucy5hbGlnblkgPSAwLjU7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9wdGlvbnMuYWxpZ25ZID09PSAnYm90dG9tJykge1xuICAgICAgb3B0aW9ucy5hbGlnblkgPSAxLjA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKG9wdGlvbnMuYWxpZ25YICE9PSB1bmRlZmluZWQgfHwgcmVxdWlyZWQpIHtcbiAgICAgICAgb3B0aW9ucy5hbGlnblkgPSBwYXJzZUZsb2F0KG9wdGlvbnMuYWxpZ25ZKTtcbiAgICAgICAgaWYgKGlzTmFOKG9wdGlvbnMuYWxpZ25ZKSkge1xuICAgICAgICAgIG9wdGlvbnMuYWxpZ25ZID0gMC41O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH07XG5cbiAgdmFyIFNVUFBPUlRFRF9TQ0FMRV9PUFRJT05TID0ge1xuICAgICAgJ2NvdmVyJzogJ2NvdmVyJyxcbiAgICAgICdmaXQnOiAnZml0JyxcbiAgICAgICdmaXQtc21hbGxlcic6ICdmaXQtc21hbGxlcicsXG4gICAgICAnZmlsbCc6ICdmaWxsJ1xuICB9O1xuICBcbiAgZnVuY3Rpb24gdmFsaWRTY2FsZShzY2FsZSkge1xuICAgIGlmICghU1VQUE9SVEVEX1NDQUxFX09QVElPTlMuaGFzT3duUHJvcGVydHkoc2NhbGUpKSB7XG4gICAgICByZXR1cm4gJ2NvdmVyJztcbiAgICB9XG4gICAgcmV0dXJuIHNjYWxlO1xuICB9XG4gIFxuICAvKiBDTEFTUyBERUZJTklUSU9OXG4gICAqID09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbiAgdmFyIEJhY2tzdHJldGNoID0gZnVuY3Rpb24gKGNvbnRhaW5lciwgaW1hZ2VzLCBvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sICQuZm4uYmFja3N0cmV0Y2guZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG4gICAgdGhpcy5maXJzdFNob3cgPSB0cnVlO1xuXG4gICAgLy8gUHJvY2VzcyBvcHRpb25zXG4gICAgcHJvY2Vzc09wdGlvbnModGhpcy5vcHRpb25zLCB0cnVlKTtcblxuICAgIC8qIEluIGl0cyBzaW1wbGVzdCBmb3JtLCB3ZSBhbGxvdyBCYWNrc3RyZXRjaCB0byBiZSBjYWxsZWQgb24gYW4gaW1hZ2UgcGF0aC5cbiAgICAgKiBlLmcuICQuYmFja3N0cmV0Y2goJy9wYXRoL3RvL2ltYWdlLmpwZycpXG4gICAgICogU28sIHdlIG5lZWQgdG8gdHVybiB0aGlzIGJhY2sgaW50byBhbiBhcnJheS5cbiAgICAgKi9cbiAgICB0aGlzLmltYWdlcyA9IHByb2Nlc3NJbWFnZXNBcnJheSgkLmlzQXJyYXkoaW1hZ2VzKSA/IGltYWdlcyA6IFtpbWFnZXNdKTtcblxuICAgIC8qKlxuICAgICAqIFBhdXNlZC1PcHRpb25cbiAgICAgKi9cbiAgICBpZiAodGhpcy5vcHRpb25zLnBhdXNlZCkge1xuICAgICAgICB0aGlzLnBhdXNlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnQtT3B0aW9uIChJbmRleClcbiAgICAgKi9cbiAgICBpZiAodGhpcy5vcHRpb25zLnN0YXJ0ID49IHRoaXMuaW1hZ2VzLmxlbmd0aClcbiAgICB7XG4gICAgICAgIHRoaXMub3B0aW9ucy5zdGFydCA9IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDE7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuc3RhcnQgPCAwKVxuICAgIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnN0YXJ0ID0gMDtcbiAgICB9XG5cbiAgICAvLyBDb252ZW5pZW5jZSByZWZlcmVuY2UgdG8ga25vdyBpZiB0aGUgY29udGFpbmVyIGlzIGJvZHkuXG4gICAgdGhpcy5pc0JvZHkgPSBjb250YWluZXIgPT09IGRvY3VtZW50LmJvZHk7XG5cbiAgICAvKiBXZSdyZSBrZWVwaW5nIHRyYWNrIG9mIGEgZmV3IGRpZmZlcmVudCBlbGVtZW50c1xuICAgICAqXG4gICAgICogQ29udGFpbmVyOiB0aGUgZWxlbWVudCB0aGF0IEJhY2tzdHJldGNoIHdhcyBjYWxsZWQgb24uXG4gICAgICogV3JhcDogYSBESVYgdGhhdCB3ZSBwbGFjZSB0aGUgaW1hZ2UgaW50bywgc28gd2UgY2FuIGhpZGUgdGhlIG92ZXJmbG93LlxuICAgICAqIFJvb3Q6IENvbnZlbmllbmNlIHJlZmVyZW5jZSB0byBoZWxwIGNhbGN1bGF0ZSB0aGUgY29ycmVjdCBoZWlnaHQuXG4gICAgICovXG4gICAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgdGhpcy4kY29udGFpbmVyID0gJChjb250YWluZXIpO1xuICAgIHRoaXMuJHJvb3QgPSB0aGlzLmlzQm9keSA/IHN1cHBvcnRzRml4ZWRQb3NpdGlvbiA/ICR3aW5kb3cgOiAkKGRvY3VtZW50KSA6IHRoaXMuJGNvbnRhaW5lcjtcblxuICAgIHRoaXMub3JpZ2luYWxJbWFnZXMgPSB0aGlzLmltYWdlcztcbiAgICB0aGlzLmltYWdlcyA9IG9wdGltYWxTaXplSW1hZ2VzKFxuICAgICAgICB0aGlzLm9wdGlvbnMuYWx3YXlzVGVzdFdpbmRvd1Jlc29sdXRpb24gPyAkd2luZG93IDogdGhpcy4kcm9vdCwgXG4gICAgICAgIHRoaXMub3JpZ2luYWxJbWFnZXMpO1xuXG4gICAgLyoqXG4gICAgICogUHJlLUxvYWRpbmcuXG4gICAgICogVGhpcyBpcyB0aGUgZmlyc3QgaW1hZ2UsIHNvIHdlIHdpbGwgcHJlbG9hZCBhIG1pbmltdW0gb2YgMSBpbWFnZXMuXG4gICAgICovXG4gICAgcHJlbG9hZCh0aGlzLmltYWdlcywgdGhpcy5vcHRpb25zLnN0YXJ0IHx8IDAsIHRoaXMub3B0aW9ucy5wcmVsb2FkIHx8IDEpO1xuXG4gICAgLy8gRG9uJ3QgY3JlYXRlIGEgbmV3IHdyYXAgaWYgb25lIGFscmVhZHkgZXhpc3RzIChmcm9tIGEgcHJldmlvdXMgaW5zdGFuY2Ugb2YgQmFja3N0cmV0Y2gpXG4gICAgdmFyICRleGlzdGluZyA9IHRoaXMuJGNvbnRhaW5lci5jaGlsZHJlbihcIi5iYWNrc3RyZXRjaFwiKS5maXJzdCgpO1xuICAgIHRoaXMuJHdyYXAgPSAkZXhpc3RpbmcubGVuZ3RoID8gJGV4aXN0aW5nIDogXG4gICAgICAgICQoJzxkaXYgY2xhc3M9XCJiYWNrc3RyZXRjaFwiPjwvZGl2PicpXG4gICAgICAgIC5jc3ModGhpcy5vcHRpb25zLmJ5cGFzc0NzcyA/IHt9IDogc3R5bGVzLndyYXApXG4gICAgICAgIC5hcHBlbmRUbyh0aGlzLiRjb250YWluZXIpO1xuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuYnlwYXNzQ3NzKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBOb24tYm9keSBlbGVtZW50cyBuZWVkIHNvbWUgc3R5bGUgYWRqdXN0bWVudHNcbiAgICAgICAgaWYgKCF0aGlzLmlzQm9keSkge1xuICAgICAgICAgIC8vIElmIHRoZSBjb250YWluZXIgaXMgc3RhdGljYWxseSBwb3NpdGlvbmVkLCB3ZSBuZWVkIHRvIG1ha2UgaXQgcmVsYXRpdmUsXG4gICAgICAgICAgLy8gYW5kIGlmIG5vIHpJbmRleCBpcyBkZWZpbmVkLCB3ZSBzaG91bGQgc2V0IGl0IHRvIHplcm8uXG4gICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy4kY29udGFpbmVyLmNzcygncG9zaXRpb24nKVxuICAgICAgICAgICAgLCB6SW5kZXggPSB0aGlzLiRjb250YWluZXIuY3NzKCd6SW5kZXgnKTtcblxuICAgICAgICAgIHRoaXMuJGNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24gPT09ICdzdGF0aWMnID8gJ3JlbGF0aXZlJyA6IHBvc2l0aW9uXG4gICAgICAgICAgICAsIHpJbmRleDogekluZGV4ID09PSAnYXV0bycgPyAwIDogekluZGV4XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBOZWVkcyBhIGhpZ2hlciB6LWluZGV4XG4gICAgICAgICAgdGhpcy4kd3JhcC5jc3Moe3pJbmRleDogLTk5OTk5OH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRml4ZWQgb3IgYWJzb2x1dGUgcG9zaXRpb25pbmc/XG4gICAgICAgIHRoaXMuJHdyYXAuY3NzKHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLmlzQm9keSAmJiBzdXBwb3J0c0ZpeGVkUG9zaXRpb24gPyAnZml4ZWQnIDogJ2Fic29sdXRlJ1xuICAgICAgICB9KTtcbiAgICBcbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGZpcnN0IGltYWdlXG4gICAgdGhpcy5pbmRleCA9IHRoaXMub3B0aW9ucy5zdGFydDtcbiAgICB0aGlzLnNob3codGhpcy5pbmRleCk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlc2l6ZVxuICAgICR3aW5kb3cub24oJ3Jlc2l6ZS5iYWNrc3RyZXRjaCcsICQucHJveHkodGhpcy5yZXNpemUsIHRoaXMpKVxuICAgICAgICAgICAub24oJ29yaWVudGF0aW9uY2hhbmdlLmJhY2tzdHJldGNoJywgJC5wcm94eShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIE5lZWQgdG8gZG8gdGhpcyBpbiBvcmRlciB0byBnZXQgdGhlIHJpZ2h0IHdpbmRvdyBoZWlnaHRcbiAgICAgICAgICAgICAgaWYgKHRoaXMuaXNCb2R5ICYmIHdpbmRvdy5wYWdlWU9mZnNldCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2l6ZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgIH0sIHRoaXMpKTtcbiAgfTtcblxuICB2YXIgcGVyZm9ybVRyYW5zaXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgdmFyIHRyYW5zaXRpb24gPSBvcHRpb25zLnRyYW5zaXRpb24gfHwgJ2ZhZGUnO1xuXG4gICAgLy8gTG9vayBmb3IgbXVsdGlwbGUgb3B0aW9uc1xuICAgIGlmICh0eXBlb2YgdHJhbnNpdGlvbiA9PT0gJ3N0cmluZycgJiYgdHJhbnNpdGlvbi5pbmRleE9mKCd8JykgPiAtMSkge1xuICAgICAgdHJhbnNpdGlvbiA9IHRyYW5zaXRpb24uc3BsaXQoJ3wnKTtcbiAgICB9XG5cbiAgICBpZiAodHJhbnNpdGlvbiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbltNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAodHJhbnNpdGlvbi5sZW5ndGggLSAxKSldO1xuICAgIH1cbiAgICBcbiAgICB2YXIgJG5ldyA9IG9wdGlvbnNbJ25ldyddO1xuICAgIHZhciAkb2xkID0gb3B0aW9uc1snb2xkJ10gPyBvcHRpb25zWydvbGQnXSA6ICQoW10pO1xuXG4gICAgc3dpdGNoICh0cmFuc2l0aW9uLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSkge1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgY2FzZSAnZmFkZSc6XG4gICAgICAgICRuZXcuZmFkZUluKHtcbiAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICBjb21wbGV0ZTogb3B0aW9ucy5jb21wbGV0ZSxcbiAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nIHx8IHVuZGVmaW5lZFxuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAgIFxuICAgICAgY2FzZSAnZmFkZWlub3V0JzpcbiAgICAgIGNhc2UgJ2ZhZGVfaW5fb3V0JzpcbiAgICAgICAgICAgIFxuICAgICAgICB2YXIgZmFkZUluTmV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJG5ldy5mYWRlSW4oe1xuICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiAvIDIsXG4gICAgICAgICAgICAgIGNvbXBsZXRlOiBvcHRpb25zLmNvbXBsZXRlLFxuICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nIHx8IHVuZGVmaW5lZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBpZiAoJG9sZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICRvbGQuZmFkZU91dCh7XG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uIC8gMixcbiAgICAgICAgICAgICAgY29tcGxldGU6IGZhZGVJbk5ldyxcbiAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCB1bmRlZmluZWRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmFkZUluTmV3KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdwdXNobGVmdCc6XG4gICAgICBjYXNlICdwdXNoX2xlZnQnOlxuICAgICAgY2FzZSAncHVzaHJpZ2h0JzpcbiAgICAgIGNhc2UgJ3B1c2hfcmlnaHQnOlxuICAgICAgY2FzZSAncHVzaHVwJzpcbiAgICAgIGNhc2UgJ3B1c2hfdXAnOlxuICAgICAgY2FzZSAncHVzaGRvd24nOlxuICAgICAgY2FzZSAncHVzaF9kb3duJzpcbiAgICAgIGNhc2UgJ2NvdmVybGVmdCc6XG4gICAgICBjYXNlICdjb3Zlcl9sZWZ0JzpcbiAgICAgIGNhc2UgJ2NvdmVycmlnaHQnOlxuICAgICAgY2FzZSAnY292ZXJfcmlnaHQnOlxuICAgICAgY2FzZSAnY292ZXJ1cCc6XG4gICAgICBjYXNlICdjb3Zlcl91cCc6XG4gICAgICBjYXNlICdjb3ZlcmRvd24nOlxuICAgICAgY2FzZSAnY292ZXJfZG93bic6XG5cbiAgICAgICAgdmFyIHRyYW5zaXRpb25QYXJ0cyA9IHRyYW5zaXRpb24ubWF0Y2goL14oY292ZXJ8cHVzaClfPyguKikkLyk7XG5cbiAgICAgICAgdmFyIGFuaW1Qcm9wID0gdHJhbnNpdGlvblBhcnRzWzJdID09PSAnbGVmdCcgPyAncmlnaHQnIDpcbiAgICAgICAgICAgIHRyYW5zaXRpb25QYXJ0c1syXSA9PT0gJ3JpZ2h0JyA/ICdsZWZ0JyA6XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvblBhcnRzWzJdID09PSAnZG93bicgPyAndG9wJyA6XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25QYXJ0c1syXSA9PT0gJ3VwJyA/ICdib3R0b20nIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICdyaWdodCc7XG5cbiAgICAgICAgdmFyIG5ld0Nzc1N0YXJ0ID0ge1xuICAgICAgICAgICdkaXNwbGF5JzogJydcbiAgICAgICAgfSwgbmV3Q3NzQW5pbSA9IHt9O1xuICAgICAgICBuZXdDc3NTdGFydFthbmltUHJvcF0gPSAnLTEwMCUnO1xuICAgICAgICBuZXdDc3NBbmltW2FuaW1Qcm9wXSA9IDA7XG5cbiAgICAgICAgJG5ld1xuICAgICAgICAgICAgLmNzcyhuZXdDc3NTdGFydClcbiAgICAgICAgICAgIC5hbmltYXRlKG5ld0Nzc0FuaW0sIHtcbiAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJG5ldy5jc3MoYW5pbVByb3AsICcnKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbXBsZXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAodHJhbnNpdGlvblBhcnRzWzFdID09PSAncHVzaCcgJiYgJG9sZC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBvbGRDc3NBbmltID0ge307XG4gICAgICAgICAgICBvbGRDc3NBbmltW2FuaW1Qcm9wXSA9ICcxMDAlJztcblxuICAgICAgICAgICAgJG9sZFxuICAgICAgICAgICAgICAgIC5hbmltYXRlKG9sZENzc0FuaW0sIHtcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJG9sZC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgfTtcblxuICAvKiBQVUJMSUMgTUVUSE9EU1xuICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4gIEJhY2tzdHJldGNoLnByb3RvdHlwZSA9IHtcblxuICAgICAgcmVzaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG5cbiAgICAgICAgICAvLyBDaGVjayBmb3IgYSBiZXR0ZXIgc3VpdGVkIGltYWdlIGFmdGVyIHRoZSByZXNpemVcbiAgICAgICAgICB2YXIgJHJlc1Rlc3QgPSB0aGlzLm9wdGlvbnMuYWx3YXlzVGVzdFdpbmRvd1Jlc29sdXRpb24gPyAkKHdpbmRvdykgOiB0aGlzLiRyb290O1xuICAgICAgICAgIHZhciBuZXdDb250YWluZXJXaWR0aCA9ICRyZXNUZXN0LndpZHRoKCk7XG4gICAgICAgICAgdmFyIG5ld0NvbnRhaW5lckhlaWdodCA9ICRyZXNUZXN0LmhlaWdodCgpO1xuICAgICAgICAgIHZhciBjaGFuZ2VSYXRpb1cgPSBuZXdDb250YWluZXJXaWR0aCAvICh0aGlzLl9sYXN0UmVzaXplQ29udGFpbmVyV2lkdGggfHwgMCk7XG4gICAgICAgICAgdmFyIGNoYW5nZVJhdGlvSCA9IG5ld0NvbnRhaW5lckhlaWdodCAvICh0aGlzLl9sYXN0UmVzaXplQ29udGFpbmVySGVpZ2h0IHx8IDApO1xuICAgICAgICAgIHZhciByZXNvbHV0aW9uQ2hhbmdlUmF0aW9UaHJlc2hvbGQgPSB0aGlzLm9wdGlvbnMucmVzb2x1dGlvbkNoYW5nZVJhdGlvVGhyZXNob2xkIHx8IDAuMDtcblxuICAgICAgICAgIC8vIGNoZWNrIGZvciBiaWcgY2hhbmdlcyBpbiBjb250YWluZXIgc2l6ZVxuICAgICAgICAgIGlmICgobmV3Q29udGFpbmVyV2lkdGggIT09IHRoaXMuX2xhc3RSZXNpemVDb250YWluZXJXaWR0aCB8fFxuICAgICAgICAgICAgICAgbmV3Q29udGFpbmVySGVpZ2h0ICE9PSB0aGlzLl9sYXN0UmVzaXplQ29udGFpbmVySGVpZ2h0KSAmJlxuICAgICAgICAgICAgICAoKE1hdGguYWJzKGNoYW5nZVJhdGlvVyAtIDEpID49IHJlc29sdXRpb25DaGFuZ2VSYXRpb1RocmVzaG9sZCB8fCBpc05hTihjaGFuZ2VSYXRpb1cpKSB8fFxuICAgICAgICAgICAgICAoTWF0aC5hYnMoY2hhbmdlUmF0aW9IIC0gMSkgPj0gcmVzb2x1dGlvbkNoYW5nZVJhdGlvVGhyZXNob2xkIHx8IGlzTmFOKGNoYW5nZVJhdGlvSCkpKSkge1xuXG4gICAgICAgICAgICB0aGlzLl9sYXN0UmVzaXplQ29udGFpbmVyV2lkdGggPSBuZXdDb250YWluZXJXaWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RSZXNpemVDb250YWluZXJIZWlnaHQgPSBuZXdDb250YWluZXJIZWlnaHQ7XG5cbiAgICAgICAgICAgIC8vIEJpZyBjaGFuZ2U6IHJlYnVpbGQgdGhlIGVudGlyZSBpbWFnZXMgYXJyYXlcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzID0gb3B0aW1hbFNpemVJbWFnZXMoJHJlc1Rlc3QsIHRoaXMub3JpZ2luYWxJbWFnZXMpO1xuXG4gICAgICAgICAgICAvLyBQcmVsb2FkIHRoZW0gKHRoZXkgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGluc2VydGVkIG9uIHRoZSBuZXh0IGN5Y2xlKVxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcmVsb2FkKSB7XG4gICAgICAgICAgICAgIHByZWxvYWQodGhpcy5pbWFnZXMsICh0aGlzLmluZGV4ICsgMSkgJSB0aGlzLmltYWdlcy5sZW5ndGgsIHRoaXMub3B0aW9ucy5wcmVsb2FkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW4gY2FzZSB0aGVyZSBpcyBubyBjeWNsZSBhbmQgdGhlIG5ldyBzb3VyY2UgaXMgZGlmZmVyZW50IHRoYW4gdGhlIGN1cnJlbnRcbiAgICAgICAgICAgIGlmICh0aGlzLmltYWdlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50SW1hZ2UudXJsICE9PSB0aGlzLmltYWdlc1swXS51cmwpIHtcblxuICAgICAgICAgICAgICAvLyBXYWl0IGEgbGl0dGxlIGFuIHVwZGF0ZSB0aGUgaW1hZ2UgYmVpbmcgc2hvd2VkXG4gICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoYXQuX3NlbGVjdEFub3RoZXJSZXNvbHV0aW9uVGltZW91dCk7XG4gICAgICAgICAgICAgIHRoYXQuX3NlbGVjdEFub3RoZXJSZXNvbHV0aW9uVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvdygwKTtcbiAgICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zLnJlc29sdXRpb25SZWZyZXNoUmF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGJnQ1NTID0ge2xlZnQ6IDAsIHRvcDogMCwgcmlnaHQ6ICdhdXRvJywgYm90dG9tOiAnYXV0byd9XG4gICAgICAgICAgXG4gICAgICAgICAgICAsIGJveFdpZHRoID0gdGhpcy5pc0JvZHkgPyB0aGlzLiRyb290LndpZHRoKCkgOiB0aGlzLiRyb290LmlubmVyV2lkdGgoKVxuICAgICAgICAgICAgLCBib3hIZWlnaHQgPSB0aGlzLmlzQm9keSA/ICggd2luZG93LmlubmVySGVpZ2h0ID8gd2luZG93LmlubmVySGVpZ2h0IDogdGhpcy4kcm9vdC5oZWlnaHQoKSApIDogdGhpcy4kcm9vdC5pbm5lckhlaWdodCgpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICwgbmF0dXJhbFdpZHRoID0gdGhpcy4kaXRlbVdyYXBwZXIuZGF0YSgnd2lkdGgnKVxuICAgICAgICAgICAgLCBuYXR1cmFsSGVpZ2h0ID0gdGhpcy4kaXRlbVdyYXBwZXIuZGF0YSgnaGVpZ2h0JylcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLCByYXRpbyA9IChuYXR1cmFsV2lkdGggLyBuYXR1cmFsSGVpZ2h0KSB8fCAxXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgLCBhbGlnblggPSB0aGlzLl9jdXJyZW50SW1hZ2UuYWxpZ25YID09PSB1bmRlZmluZWQgPyB0aGlzLm9wdGlvbnMuYWxpZ25YIDogdGhpcy5fY3VycmVudEltYWdlLmFsaWduWFxuICAgICAgICAgICAgLCBhbGlnblkgPSB0aGlzLl9jdXJyZW50SW1hZ2UuYWxpZ25ZID09PSB1bmRlZmluZWQgPyB0aGlzLm9wdGlvbnMuYWxpZ25ZIDogdGhpcy5fY3VycmVudEltYWdlLmFsaWduWVxuICAgICAgICAgICAgLCBzY2FsZSA9IHZhbGlkU2NhbGUodGhpcy5fY3VycmVudEltYWdlLnNjYWxlIHx8IHRoaXMub3B0aW9ucy5zY2FsZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdmFyIHdpZHRoLCBoZWlnaHQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgaWYgKHNjYWxlID09PSAnZml0JyB8fCBzY2FsZSA9PT0gJ2ZpdC1zbWFsbGVyJykge1xuICAgICAgICAgICAgd2lkdGggPSBuYXR1cmFsV2lkdGg7XG4gICAgICAgICAgICBoZWlnaHQgPSBuYXR1cmFsSGVpZ2h0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAod2lkdGggPiBib3hXaWR0aCB8fCBcbiAgICAgICAgICAgICAgICBoZWlnaHQgPiBib3hIZWlnaHQgfHwgXG4gICAgICAgICAgICAgICAgc2NhbGUgPT09ICdmaXQtc21hbGxlcicpIHtcbiAgICAgICAgICAgICAgdmFyIGJveFJhdGlvID0gYm94V2lkdGggLyBib3hIZWlnaHQ7XG4gICAgICAgICAgICAgIGlmIChib3hSYXRpbyA+IHJhdGlvKSB7XG4gICAgICAgICAgICAgICAgd2lkdGggPSBNYXRoLmZsb29yKGJveEhlaWdodCAqIHJhdGlvKTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBib3hIZWlnaHQ7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoYm94UmF0aW8gPCByYXRpbykge1xuICAgICAgICAgICAgICAgIHdpZHRoID0gYm94V2lkdGg7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gTWF0aC5mbG9vcihib3hXaWR0aCAvIHJhdGlvKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aWR0aCA9IGJveFdpZHRoO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IGJveEhlaWdodDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoc2NhbGUgPT09ICdmaWxsJykge1xuICAgICAgICAgICAgd2lkdGggPSBib3hXaWR0aDtcbiAgICAgICAgICAgIGhlaWdodCA9IGJveEhlaWdodDtcbiAgICAgICAgICB9IGVsc2UgeyAvLyAnY292ZXInXG4gICAgICAgICAgICB3aWR0aCA9IE1hdGgubWF4KGJveEhlaWdodCAqIHJhdGlvLCBib3hXaWR0aCk7XG4gICAgICAgICAgICBoZWlnaHQgPSBNYXRoLm1heCh3aWR0aCAvIHJhdGlvLCBib3hIZWlnaHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBNYWtlIGFkanVzdG1lbnRzIGJhc2VkIG9uIGltYWdlIHJhdGlvXG4gICAgICAgICAgYmdDU1MudG9wID0gLShoZWlnaHQgLSBib3hIZWlnaHQpICogYWxpZ25ZO1xuICAgICAgICAgIGJnQ1NTLmxlZnQgPSAtKHdpZHRoIC0gYm94V2lkdGgpICogYWxpZ25YO1xuICAgICAgICAgIGJnQ1NTLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgYmdDU1MuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmJ5cGFzc0Nzcykge1xuXG4gICAgICAgICAgICB0aGlzLiR3cmFwXG4gICAgICAgICAgICAgICAgLmNzcyh7d2lkdGg6IGJveFdpZHRoLCBoZWlnaHQ6IGJveEhlaWdodH0pXG4gICAgICAgICAgICAgICAgLmZpbmQoJz4uYmFja3N0cmV0Y2gtaXRlbScpLm5vdCgnLmRlbGV0ZWFibGUnKVxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHZhciAkd3JhcHBlciA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAkd3JhcHBlci5maW5kKCdpbWcsdmlkZW8saWZyYW1lJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmNzcyhiZ0NTUyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGV2dCA9ICQuRXZlbnQoJ2JhY2tzdHJldGNoLnJlc2l6ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgICByZWxhdGVkVGFyZ2V0OiB0aGlzLiRjb250YWluZXJbMF1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy4kY29udGFpbmVyLnRyaWdnZXIoZXZ0LCB0aGlzKTtcbiAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgICAgIC8vIElFNyBzZWVtcyB0byB0cmlnZ2VyIHJlc2l6ZSBiZWZvcmUgdGhlIGltYWdlIGlzIGxvYWRlZC5cbiAgICAgICAgICAgIC8vIFRoaXMgdHJ5L2NhdGNoIGJsb2NrIGlzIGEgaGFjayB0byBsZXQgaXQgZmFpbCBncmFjZWZ1bGx5LlxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIFNob3cgdGhlIHNsaWRlIGF0IGEgY2VydGFpbiBwb3NpdGlvblxuICAgICwgc2hvdzogZnVuY3Rpb24gKG5ld0luZGV4LCBvdmVycmlkZU9wdGlvbnMpIHtcblxuICAgICAgICAvLyBWYWxpZGF0ZSBpbmRleFxuICAgICAgICBpZiAoTWF0aC5hYnMobmV3SW5kZXgpID4gdGhpcy5pbWFnZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFZhcnNcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzXG4gICAgICAgICAgLCAkb2xkSXRlbVdyYXBwZXIgPSB0aGF0LiR3cmFwLmZpbmQoJz4uYmFja3N0cmV0Y2gtaXRlbScpLmFkZENsYXNzKCdkZWxldGVhYmxlJylcbiAgICAgICAgICAsIG9sZFZpZGVvV3JhcHBlciA9IHRoYXQudmlkZW9XcmFwcGVyXG4gICAgICAgICAgLCBldnRPcHRpb25zID0geyByZWxhdGVkVGFyZ2V0OiB0aGF0LiRjb250YWluZXJbMF0gfTtcblxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBcImJlZm9yZVwiIGV2ZW50XG4gICAgICAgIHRoYXQuJGNvbnRhaW5lci50cmlnZ2VyKCQuRXZlbnQoJ2JhY2tzdHJldGNoLmJlZm9yZScsIGV2dE9wdGlvbnMpLCBbdGhhdCwgbmV3SW5kZXhdKTtcblxuICAgICAgICAvLyBTZXQgdGhlIG5ldyBmcmFtZSBpbmRleFxuICAgICAgICB0aGlzLmluZGV4ID0gbmV3SW5kZXg7XG4gICAgICAgIHZhciBzZWxlY3RlZEltYWdlID0gdGhhdC5pbWFnZXNbbmV3SW5kZXhdO1xuXG4gICAgICAgIC8vIFBhdXNlIHRoZSBzbGlkZXNob3dcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoYXQuX2N5Y2xlVGltZW91dCk7XG5cbiAgICAgICAgLy8gTmV3IGltYWdlXG5cbiAgICAgICAgZGVsZXRlIHRoYXQudmlkZW9XcmFwcGVyOyAvLyBDdXJyZW50IGl0ZW0gbWF5IG5vdCBiZSBhIHZpZGVvXG5cbiAgICAgICAgdmFyIGlzVmlkZW8gPSBpc1ZpZGVvU291cmNlKHNlbGVjdGVkSW1hZ2UpO1xuICAgICAgICBpZiAoaXNWaWRlbykge1xuICAgICAgICAgIHRoYXQudmlkZW9XcmFwcGVyID0gbmV3IFZpZGVvV3JhcHBlcihzZWxlY3RlZEltYWdlKTtcbiAgICAgICAgICB0aGF0LiRpdGVtID0gdGhhdC52aWRlb1dyYXBwZXIuJHZpZGVvLmNzcygncG9pbnRlci1ldmVudHMnLCAnbm9uZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoYXQuJGl0ZW0gPSAkKCc8aW1nIC8+Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGF0LiRpdGVtV3JhcHBlciA9ICQoJzxkaXYgY2xhc3M9XCJiYWNrc3RyZXRjaC1pdGVtXCI+JylcbiAgICAgICAgICAgIC5hcHBlbmQodGhhdC4kaXRlbSk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ieXBhc3NDc3MpIHtcbiAgICAgICAgICAgIHRoYXQuJGl0ZW1XcmFwcGVyLmNzcyh7XG4gICAgICAgICAgICAgICdkaXNwbGF5JzogJ25vbmUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGF0LiRpdGVtV3JhcHBlci5jc3Moc3R5bGVzLml0ZW1XcmFwcGVyKTtcbiAgICAgICAgICB0aGF0LiRpdGVtLmNzcyhzdHlsZXMuaXRlbSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGF0LiRpdGVtLmJpbmQoaXNWaWRlbyA/ICdjYW5wbGF5JyA6ICdsb2FkJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcylcbiAgICAgICAgICAgICAgLCAkd3JhcHBlciA9ICR0aGlzLnBhcmVudCgpXG4gICAgICAgICAgICAgICwgb3B0aW9ucyA9ICR3cmFwcGVyLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAob3ZlcnJpZGVPcHRpb25zKSB7XG4gICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgb3B0aW9ucywgb3ZlcnJpZGVPcHRpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGltZ1dpZHRoID0gdGhpcy5uYXR1cmFsV2lkdGggfHwgdGhpcy52aWRlb1dpZHRoIHx8IHRoaXMud2lkdGhcbiAgICAgICAgICAgICAgLCBpbWdIZWlnaHQgPSB0aGlzLm5hdHVyYWxIZWlnaHQgfHwgdGhpcy52aWRlb0hlaWdodCB8fCB0aGlzLmhlaWdodDtcblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgbmF0dXJhbCBkaW1lbnNpb25zXG4gICAgICAgICAgICAkd3JhcHBlclxuICAgICAgICAgICAgICAgIC5kYXRhKCd3aWR0aCcsIGltZ1dpZHRoKVxuICAgICAgICAgICAgICAgIC5kYXRhKCdoZWlnaHQnLCBpbWdIZWlnaHQpO1xuXG4gICAgICAgICAgICB2YXIgZ2V0T3B0aW9uID0gZnVuY3Rpb24gKG9wdCkge1xuICAgICAgICAgICAgICByZXR1cm4gb3B0aW9uc1tvcHRdICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgIG9wdGlvbnNbb3B0XSA6XG4gICAgICAgICAgICAgICAgdGhhdC5vcHRpb25zW29wdF07XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IGdldE9wdGlvbigndHJhbnNpdGlvbicpO1xuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25FYXNpbmcgPSBnZXRPcHRpb24oJ3RyYW5zaXRpb25FYXNpbmcnKTtcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uRHVyYXRpb24gPSBnZXRPcHRpb24oJ3RyYW5zaXRpb25EdXJhdGlvbicpO1xuXG4gICAgICAgICAgICAvLyBTaG93IHRoZSBpbWFnZSwgdGhlbiBkZWxldGUgdGhlIG9sZCBvbmVcbiAgICAgICAgICAgIHZhciBicmluZ0luTmV4dEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKG9sZFZpZGVvV3JhcHBlcikge1xuICAgICAgICAgICAgICAgIG9sZFZpZGVvV3JhcHBlci5zdG9wKCk7XG4gICAgICAgICAgICAgICAgb2xkVmlkZW9XcmFwcGVyLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgJG9sZEl0ZW1XcmFwcGVyLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgIC8vIFJlc3VtZSB0aGUgc2xpZGVzaG93XG4gICAgICAgICAgICAgIGlmICghdGhhdC5wYXVzZWQgJiYgdGhhdC5pbWFnZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHRoYXQuY3ljbGUoKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIE5vdyB3ZSBjYW4gY2xlYXIgdGhlIGJhY2tncm91bmQgb24gdGhlIGVsZW1lbnQsIHRvIHNwYXJlIG1lbW9yeVxuICAgICAgICAgICAgICBpZiAoIXRoYXQub3B0aW9ucy5ieXBhc3NDc3MgJiYgIXRoYXQuaXNCb2R5KSB7XG4gICAgICAgICAgICAgICAgdGhhdC4kY29udGFpbmVyLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICdub25lJyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBcImFmdGVyXCIgYW5kIFwic2hvd1wiIGV2ZW50c1xuICAgICAgICAgICAgICAvLyBcInNob3dcIiBpcyBiZWluZyBkZXByZWNhdGVkXG4gICAgICAgICAgICAgICQoWydhZnRlcicsICdzaG93J10pLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoYXQuJGNvbnRhaW5lci50cmlnZ2VyKCQuRXZlbnQoJ2JhY2tzdHJldGNoLicgKyB0aGlzLCBldnRPcHRpb25zKSwgW3RoYXQsIG5ld0luZGV4XSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGlzVmlkZW8pIHtcbiAgICAgICAgICAgICAgICB0aGF0LnZpZGVvV3JhcHBlci5wbGF5KCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICgodGhhdC5maXJzdFNob3cgJiYgIXRoYXQub3B0aW9ucy5hbmltYXRlRmlyc3QpIHx8ICF0cmFuc2l0aW9uRHVyYXRpb24gfHwgIXRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBBdm9pZCB0cmFuc2l0aW9uIG9uIGZpcnN0IHNob3cgb3IgaWYgdGhlcmUncyBubyB0cmFuc2l0aW9uRHVyYXRpb24gdmFsdWVcbiAgICAgICAgICAgICAgICAkd3JhcHBlci5zaG93KCk7XG4gICAgICAgICAgICAgICAgYnJpbmdJbk5leHRJbWFnZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgJ25ldyc6ICR3cmFwcGVyLFxuICAgICAgICAgICAgICAgICAgICBvbGQ6ICRvbGRJdGVtV3JhcHBlcixcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiB0cmFuc2l0aW9uRWFzaW5nLFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogYnJpbmdJbk5leHRJbWFnZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoYXQuZmlyc3RTaG93ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIFJlc2l6ZVxuICAgICAgICAgICAgdGhhdC5yZXNpemUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhhdC4kaXRlbVdyYXBwZXIuYXBwZW5kVG8odGhhdC4kd3JhcCk7XG5cbiAgICAgICAgdGhhdC4kaXRlbS5hdHRyKCdhbHQnLCBzZWxlY3RlZEltYWdlLmFsdCB8fCAnJyk7XG4gICAgICAgIHRoYXQuJGl0ZW1XcmFwcGVyLmRhdGEoJ29wdGlvbnMnLCBzZWxlY3RlZEltYWdlKTtcblxuICAgICAgICBpZiAoIWlzVmlkZW8pIHtcbiAgICAgICAgICB0aGF0LiRpdGVtLmF0dHIoJ3NyYycsIHNlbGVjdGVkSW1hZ2UudXJsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhhdC5fY3VycmVudEltYWdlID0gc2VsZWN0ZWRJbWFnZTtcblxuICAgICAgICByZXR1cm4gdGhhdDtcbiAgICAgIH1cblxuICAgICwgY3VycmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleDtcbiAgICAgIH1cblxuICAgICwgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgIGFyZ3MudW5zaGlmdCh0aGlzLmluZGV4IDwgdGhpcy5pbWFnZXMubGVuZ3RoIC0gMSA/IHRoaXMuaW5kZXggKyAxIDogMCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3cuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG5cbiAgICAsIHByZXY6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICBhcmdzLnVuc2hpZnQodGhpcy5pbmRleCA9PT0gMCA/IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEgOiB0aGlzLmluZGV4IC0gMSk7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3cuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICB9XG5cbiAgICAsIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFBhdXNlIHRoZSBzbGlkZXNob3dcbiAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudmlkZW9XcmFwcGVyKSB7XG4gICAgICAgICAgdGhpcy52aWRlb1dyYXBwZXIucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAsIHJlc3VtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBSZXN1bWUgdGhlIHNsaWRlc2hvd1xuICAgICAgICB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudmlkZW9XcmFwcGVyKSB7XG4gICAgICAgICAgdGhpcy52aWRlb1dyYXBwZXIucGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmN5Y2xlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgLCBjeWNsZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBTdGFydC9yZXN1bWUgdGhlIHNsaWRlc2hvd1xuICAgICAgICBpZih0aGlzLmltYWdlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgLy8gQ2xlYXIgdGhlIHRpbWVvdXQsIGp1c3QgaW4gY2FzZVxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9jeWNsZVRpbWVvdXQpO1xuXG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gKHRoaXMuX2N1cnJlbnRJbWFnZSAmJiB0aGlzLl9jdXJyZW50SW1hZ2UuZHVyYXRpb24pIHx8IHRoaXMub3B0aW9ucy5kdXJhdGlvbjtcbiAgICAgICAgICB2YXIgaXNWaWRlbyA9IGlzVmlkZW9Tb3VyY2UodGhpcy5fY3VycmVudEltYWdlKTtcbiAgICAgICAgICBcbiAgICAgICAgICB2YXIgY2FsbE5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLiRpdGVtLm9mZignLmN5Y2xlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBwYXVzZWQgc2xpZGVzaG93XG4gICAgICAgICAgICBpZiAoIXRoaXMucGF1c2VkKSB7XG4gICAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICAvLyBTcGVjaWFsIHZpZGVvIGhhbmRsaW5nXG4gICAgICAgICAgaWYgKGlzVmlkZW8pIHtcblxuICAgICAgICAgICAgLy8gTGVhdmUgdmlkZW8gYXQgbGFzdCBmcmFtZVxuICAgICAgICAgICAgaWYgKCF0aGlzLl9jdXJyZW50SW1hZ2UubG9vcCkge1xuICAgICAgICAgICAgICB2YXIgbGFzdEZyYW1lVGltZW91dCA9IDA7XG5cbiAgICAgICAgICAgICAgdGhpcy4kaXRlbVxuICAgICAgICAgICAgICAgIC5vbigncGxheWluZy5jeWNsZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXIgPSAkKHRoaXMpLmRhdGEoJ3BsYXllcicpO1xuXG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobGFzdEZyYW1lVGltZW91dCk7XG4gICAgICAgICAgICAgICAgICBsYXN0RnJhbWVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuJHZpZGVvLnRyaWdnZXIoJ2VuZGVkJyk7XG4gICAgICAgICAgICAgICAgICB9LCAocGxheWVyLmdldER1cmF0aW9uKCkgLSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKSkgKiAxMDAwKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbignZW5kZWQuY3ljbGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobGFzdEZyYW1lVGltZW91dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE9uIGVycm9yIGdvIHRvIG5leHRcbiAgICAgICAgICAgIHRoaXMuJGl0ZW0ub24oJ2Vycm9yLmN5Y2xlIGluaXRlcnJvci5jeWNsZScsICQucHJveHkoY2FsbE5leHQsIHRoaXMpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaXNWaWRlbyAmJiAhdGhpcy5fY3VycmVudEltYWdlLmR1cmF0aW9uKSB7XG4gICAgICAgICAgICAvLyBJdCdzIGEgdmlkZW8gLSBwbGF5aW5nIHVudGlsIGVuZFxuICAgICAgICAgICAgdGhpcy4kaXRlbS5vbignZW5kZWQuY3ljbGUnLCAkLnByb3h5KGNhbGxOZXh0LCB0aGlzKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQ3ljbGluZyBhY2NvcmRpbmcgdG8gc3BlY2lmaWVkIGR1cmF0aW9uXG4gICAgICAgICAgICB0aGlzLl9jeWNsZVRpbWVvdXQgPSBzZXRUaW1lb3V0KCQucHJveHkoY2FsbE5leHQsIHRoaXMpLCBkdXJhdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgLCBkZXN0cm95OiBmdW5jdGlvbiAocHJlc2VydmVCYWNrZ3JvdW5kKSB7XG4gICAgICAgIC8vIFN0b3AgdGhlIHJlc2l6ZSBldmVudHNcbiAgICAgICAgJCh3aW5kb3cpLm9mZigncmVzaXplLmJhY2tzdHJldGNoIG9yaWVudGF0aW9uY2hhbmdlLmJhY2tzdHJldGNoJyk7XG5cbiAgICAgICAgLy8gU3RvcCBhbnkgdmlkZW9zXG4gICAgICAgIGlmICh0aGlzLnZpZGVvV3JhcHBlcikge1xuICAgICAgICAgIHRoaXMudmlkZW9XcmFwcGVyLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHRpbWVvdXRcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2N5Y2xlVGltZW91dCk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIEJhY2tzdHJldGNoXG4gICAgICAgIGlmKCFwcmVzZXJ2ZUJhY2tncm91bmQpIHtcbiAgICAgICAgICB0aGlzLiR3cmFwLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmVEYXRhKCdiYWNrc3RyZXRjaCcpO1xuICAgICAgfVxuICB9O1xuICAgIFxuIC8qKlxuICAqIFZpZGVvIEFic3RyYWN0aW9uIExheWVyXG4gICpcbiAgKiBTdGF0aWMgbWV0aG9kczpcbiAgKiA+IFZpZGVvV3JhcHBlci5sb2FkWW91dHViZUFQSSgpIC0+IENhbGwgaW4gb3JkZXIgdG8gbG9hZCB0aGUgWW91dHViZSBBUEkuIFxuICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBbiAneW91dHViZV9hcGlfbG9hZCcgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQgb24gJCh3aW5kb3cpIHdoZW4gdGhlIEFQSSBpcyBsb2FkZWQuXG4gICpcbiAgKiBHZW5lcmljOlxuICAqID4gcGxheWVyLnR5cGUgLT4gdHlwZSBvZiB0aGUgdmlkZW9cbiAgKiA+IHBsYXllci52aWRlbyAvIHBsYXllci4kdmlkZW8gLT4gY29udGFpbnMgdGhlIGVsZW1lbnQgaG9sZGluZyB0aGUgdmlkZW9cbiAgKiA+IHBsYXllci5wbGF5KCkgLT4gcGxheXMgdGhlIHZpZGVvXG4gICogPiBwbGF5ZXIucGF1c2UoKSAtPiBwYXVzZXMgdGhlIHZpZGVvXG4gICogPiBwbGF5ZXIuc2V0Q3VycmVudFRpbWUocG9zaXRpb24pIC0+IHNlZWtzIHRvIGEgcG9zaXRpb24gYnkgc2Vjb25kc1xuICAqIFxuICAqIFlvdXR1YmU6XG4gICogPiBwbGF5ZXIueXRJZCB3aWxsIGNvbnRhaW4gdGhlIHlvdXR1YmUgSUQgaWYgdGhlIHNvdXJjZSBpcyBhIHlvdXR1YmUgdXJsXG4gICogPiBwbGF5ZXIueXRSZWFkeSBpcyBhIGZsYWcgdGVsbGluZyB3aGV0aGVyIHRoZSB5b3V0dWJlIHNvdXJjZSBpcyByZWFkeSBmb3IgcGxheWJhY2tcbiAgKiAqL1xuXG4gIHZhciBWaWRlb1dyYXBwZXIgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEFycmF5PHt7c3JjOiBTdHJpbmcsIHR5cGU6IFN0cmluZz99fT59IG9wdGlvbnMudXJsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0aW9ucy5sb29wPWZhbHNlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbj99IG9wdGlvbnMubXV0ZT10cnVlXG4gICAqIEBwYXJhbSB7U3RyaW5nP30gb3B0aW9ucy5wb3N0ZXJcbiAgICogbG9vcCwgbXV0ZSwgcG9zdGVyXG4gICAqL1xuICBWaWRlb1dyYXBwZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIFxuICAgIHZhciAkdmlkZW87XG5cbiAgICB2YXIgc2V0VmlkZW9FbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhhdC4kdmlkZW8gPSAkdmlkZW87XG4gICAgICB0aGF0LnZpZGVvID0gJHZpZGVvWzBdO1xuICAgIH07XG4gICAgXG4gICAgLy8gRGV0ZXJtaW5lIHZpZGVvIHR5cGVcbiAgICBcbiAgICB2YXIgdmlkZW9UeXBlID0gJ3ZpZGVvJztcbiAgICBcbiAgICBpZiAoIShvcHRpb25zLnVybCBpbnN0YW5jZW9mIEFycmF5KSAmJlxuICAgICAgWU9VVFVCRV9SRUdFWFAudGVzdChvcHRpb25zLnVybCkpIHtcbiAgICAgIHZpZGVvVHlwZSA9ICd5b3V0dWJlJztcbiAgICB9XG4gICAgXG4gICAgdGhhdC50eXBlID0gdmlkZW9UeXBlO1xuXG4gICAgaWYgKHZpZGVvVHlwZSA9PT0gJ3lvdXR1YmUnKSB7XG5cbiAgICAgIC8vIFRyeSB0byBsb2FkIHRoZSBBUEkgaW4gdGhlIG1lYW50aW1lXG4gICAgICBWaWRlb1dyYXBwZXIubG9hZFlvdXR1YmVBUEkoKTtcblxuICAgICAgdGhhdC55dElkID0gb3B0aW9ucy51cmwubWF0Y2goWU9VVFVCRV9SRUdFWFApWzJdO1xuICAgICAgdmFyIHNyYyA9ICdodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8nICsgdGhhdC55dElkICtcbiAgICAgICAgJz9yZWw9MCZhdXRvcGxheT0wJnNob3dpbmZvPTAmY29udHJvbHM9MCZtb2Rlc3RicmFuZGluZz0xJyArXG4gICAgICAgICcmY2NfbG9hZF9wb2xpY3k9MCZkaXNhYmxla2I9MSZpdl9sb2FkX3BvbGljeT0zJmxvb3A9MCcgK1xuICAgICAgICAnJmVuYWJsZWpzYXBpPTEmb3JpZ2luPScgKyBlbmNvZGVVUklDb21wb25lbnQod2luZG93LmxvY2F0aW9uLm9yaWdpbik7XG5cbiAgICAgIHRoYXQuX195dFN0YXJ0TXV0ZWQgPSAhIW9wdGlvbnMubXV0ZSB8fCBvcHRpb25zLm11dGUgPT09IHVuZGVmaW5lZDtcblxuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSAvPicpXG4gICAgICAgIC5hdHRyKHsgJ3NyY190b19sb2FkJzogc3JjIH0pXG4gICAgICAgIC5jc3MoeyAnYm9yZGVyJzogMCwgJ21hcmdpbic6IDAsICdwYWRkaW5nJzogMCB9KVxuICAgICAgICAuZGF0YSgncGxheWVyJywgdGhhdCk7XG4gICAgICAgIFxuICAgICAgaWYgKG9wdGlvbnMubG9vcCkge1xuICAgICAgICAkdmlkZW8ub24oJ2VuZGVkLmxvb3AnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCF0aGF0Ll9fbWFudWFsbHlTdG9wcGVkKSB7XG4gICAgICAgICAgIHRoYXQucGxheSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoYXQueXRSZWFkeSA9IGZhbHNlO1xuXG4gICAgICBzZXRWaWRlb0VsZW1lbnQoKTtcblxuICAgICAgaWYgKHdpbmRvd1snWVQnXSkge1xuICAgICAgICB0aGF0Ll9pbml0WW91dHViZSgpO1xuICAgICAgICAkdmlkZW8udHJpZ2dlcignaW5pdHN1Y2Nlc3MnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQod2luZG93KS5vbmUoJ3lvdXR1YmVfYXBpX2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhhdC5faW5pdFlvdXR1YmUoKTtcbiAgICAgICAgICAkdmlkZW8udHJpZ2dlcignaW5pdHN1Y2Nlc3MnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBUcmFkaXRpb25hbCA8dmlkZW8+IHRhZyB3aXRoIG11bHRpcGxlIHNvdXJjZXNcbiAgICAgIFxuICAgICAgJHZpZGVvID0gJCgnPHZpZGVvPicpXG4gICAgICAgIC5wcm9wKCdhdXRvcGxheScsIGZhbHNlKVxuICAgICAgICAucHJvcCgnY29udHJvbHMnLCBmYWxzZSlcbiAgICAgICAgLnByb3AoJ2xvb3AnLCAhIW9wdGlvbnMubG9vcClcbiAgICAgICAgLnByb3AoJ211dGVkJywgISFvcHRpb25zLm11dGUgfHwgb3B0aW9ucy5tdXRlID09PSB1bmRlZmluZWQpXG4gICAgICAgIFxuICAgICAgICAvLyBMZXQgdGhlIGZpcnN0IGZyYW1lcyBiZSBhdmFpbGFibGUgYmVmb3JlIHBsYXliYWNrLCBhcyB3ZSBkbyB0cmFuc2l0aW9uc1xuICAgICAgICAucHJvcCgncHJlbG9hZCcsICdhdXRvJylcbiAgICAgICAgLnByb3AoJ3Bvc3RlcicsIG9wdGlvbnMucG9zdGVyIHx8ICcnKTtcbiAgICAgICAgXG4gICAgICB2YXIgc291cmNlcyA9IChvcHRpb25zLnVybCBpbnN0YW5jZW9mIEFycmF5KSA/IG9wdGlvbnMudXJsIDogW29wdGlvbnMudXJsXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2VJdGVtID0gc291cmNlc1tpXTtcbiAgICAgICAgaWYgKHR5cGVvZihzb3VyY2VJdGVtKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBzb3VyY2VJdGVtID0geyBzcmM6IHNvdXJjZUl0ZW0gfTtcbiAgICAgICAgfVxuICAgICAgICAkKCc8c291cmNlPicpXG4gICAgICAgICAgLmF0dHIoJ3NyYycsIHNvdXJjZUl0ZW0uc3JjKVxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0byBub3Qgc3BlY2lmeSB0eXBlIGlmIHVua25vd24gLSBcbiAgICAgICAgICAvLyAgIHNvIHRoZSBicm93c2VyIHdpbGwgdHJ5IHRvIGF1dG9kZXRlY3QuXG4gICAgICAgICAgLmF0dHIoJ3R5cGUnLCBzb3VyY2VJdGVtLnR5cGUgfHwgbnVsbClcbiAgICAgICAgICAuYXBwZW5kVG8oJHZpZGVvKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCEkdmlkZW9bMF0uY2FuUGxheVR5cGUgfHwgIXNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgICR2aWRlby50cmlnZ2VyKCdpbml0ZXJyb3InKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR2aWRlby50cmlnZ2VyKCdpbml0c3VjY2VzcycpO1xuICAgICAgfVxuXG4gICAgICBzZXRWaWRlb0VsZW1lbnQoKTtcbiAgICB9XG5cbiAgfTtcblxuICBWaWRlb1dyYXBwZXIucHJvdG90eXBlLl9pbml0WW91dHViZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgXG4gICAgdmFyIFlUID0gd2luZG93WydZVCddO1xuXG4gICAgdGhhdC4kdmlkZW9cbiAgICAgIC5hdHRyKCdzcmMnLCB0aGF0LiR2aWRlby5hdHRyKCdzcmNfdG9fbG9hZCcpKVxuICAgICAgLnJlbW92ZUF0dHIoJ3NyY190b19sb2FkJyk7XG5cbiAgICAvLyBJdCB3b24ndCBpbml0IGlmIGl0J3Mgbm90IGluIHRoZSBET00sIHNvIHdlIGVtdWxhdGUgdGhhdFxuICAgIHZhciBoYXNQYXJlbnQgPSAhIXRoYXQuJHZpZGVvWzBdLnBhcmVudE5vZGU7XG4gICAgaWYgKCFoYXNQYXJlbnQpIHtcbiAgICAgIHZhciAkdG1wUGFyZW50ID0gJCgnPGRpdj4nKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZSAhaW1wb3J0YW50JykuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XG4gICAgICB0aGF0LiR2aWRlby5hcHBlbmRUbygkdG1wUGFyZW50KTtcbiAgICB9XG5cbiAgICB2YXIgcGxheWVyID0gbmV3IFlULlBsYXllcih0aGF0LnZpZGVvLCB7XG4gICAgICBldmVudHM6IHtcbiAgICAgICAgJ29uUmVhZHknOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICBpZiAodGhhdC5fX3l0U3RhcnRNdXRlZCkge1xuICAgICAgICAgICAgcGxheWVyLm11dGUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWhhc1BhcmVudCkge1xuICAgICAgICAgICAgLy8gUmVzdG9yZSBwYXJlbnQgdG8gb2xkIHN0YXRlIC0gd2l0aG91dCBpbnRlcnJ1cHRpbmcgYW55IGNoYW5nZXNcbiAgICAgICAgICAgIGlmICh0aGF0LiR2aWRlb1swXS5wYXJlbnROb2RlID09PSAkdG1wUGFyZW50WzBdKSB7XG4gICAgICAgICAgICAgIHRoYXQuJHZpZGVvLmRldGFjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHRtcFBhcmVudC5yZW1vdmUoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGF0Lnl0UmVhZHkgPSB0cnVlO1xuICAgICAgICAgIHRoYXQuX3VwZGF0ZVlvdXR1YmVTaXplKCk7XG4gICAgICAgICAgdGhhdC4kdmlkZW8udHJpZ2dlcignY2FucGxheScpO1xuICAgICAgICB9LFxuICAgICAgICAnb25TdGF0ZUNoYW5nZSc6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHN3aXRjaCAoZXZlbnQuZGF0YSkge1xuICAgICAgICAgICAgY2FzZSBZVC5QbGF5ZXJTdGF0ZS5QTEFZSU5HOlxuICAgICAgICAgICAgICB0aGF0LiR2aWRlby50cmlnZ2VyKCdwbGF5aW5nJyk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBZVC5QbGF5ZXJTdGF0ZS5FTkRFRDpcbiAgICAgICAgICAgICAgdGhhdC4kdmlkZW8udHJpZ2dlcignZW5kZWQnKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFlULlBsYXllclN0YXRlLlBBVVNFRDpcbiAgICAgICAgICAgICAgdGhhdC4kdmlkZW8udHJpZ2dlcigncGF1c2UnKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFlULlBsYXllclN0YXRlLkJVRkZFUklORzpcbiAgICAgICAgICAgICAgdGhhdC4kdmlkZW8udHJpZ2dlcignd2FpdGluZycpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgWVQuUGxheWVyU3RhdGUuQ1VFRDpcbiAgICAgICAgICAgICAgdGhhdC4kdmlkZW8udHJpZ2dlcignY2FucGxheScpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdvblBsYXliYWNrUXVhbGl0eUNoYW5nZSc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aGF0Ll91cGRhdGVZb3V0dWJlU2l6ZSgpO1xuICAgICAgICAgIHRoYXQuJHZpZGVvLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuICAgICAgICB9LFxuICAgICAgICAnb25FcnJvcic6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB0aGF0Lmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICB0aGF0LiR2aWRlby50cmlnZ2VyKHsgJ3R5cGUnOiAnZXJyb3InLCAnZXJyb3InOiBlcnIgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoYXQueXRQbGF5ZXIgPSBwbGF5ZXI7XG5cbiAgICByZXR1cm4gdGhhdDtcbiAgfTsgICAgXG4gICAgXG4gIFZpZGVvV3JhcHBlci5wcm90b3R5cGUuX3VwZGF0ZVlvdXR1YmVTaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIHN3aXRjaCAodGhhdC55dFBsYXllci5nZXRQbGF5YmFja1F1YWxpdHkoKSB8fCAnbWVkaXVtJykge1xuICAgICAgY2FzZSAnc21hbGwnOlxuICAgICAgICB0aGF0LnZpZGVvLnZpZGVvV2lkdGggPSA0MjY7XG4gICAgICAgIHRoYXQudmlkZW8udmlkZW9IZWlnaHQgPSAyNDA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbWVkaXVtJzpcbiAgICAgICAgdGhhdC52aWRlby52aWRlb1dpZHRoID0gNjQwO1xuICAgICAgICB0aGF0LnZpZGVvLnZpZGVvSGVpZ2h0ID0gMzYwO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICBjYXNlICdsYXJnZSc6XG4gICAgICAgIHRoYXQudmlkZW8udmlkZW9XaWR0aCA9IDg1NDtcbiAgICAgICAgdGhhdC52aWRlby52aWRlb0hlaWdodCA9IDQ4MDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdoZDcyMCc6XG4gICAgICAgIHRoYXQudmlkZW8udmlkZW9XaWR0aCA9IDEyODA7XG4gICAgICAgIHRoYXQudmlkZW8udmlkZW9IZWlnaHQgPSA3MjA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaGQxMDgwJzpcbiAgICAgICAgdGhhdC52aWRlby52aWRlb1dpZHRoID0gMTkyMDtcbiAgICAgICAgdGhhdC52aWRlby52aWRlb0hlaWdodCA9IDEwODA7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaGlnaHJlcyc6XG4gICAgICAgIHRoYXQudmlkZW8udmlkZW9XaWR0aCA9IDI1NjA7XG4gICAgICAgIHRoYXQudmlkZW8udmlkZW9IZWlnaHQgPSAxNDQwO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhhdDtcbiAgfTtcblxuICBWaWRlb1dyYXBwZXIucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgdGhhdC5fX21hbnVhbGx5U3RvcHBlZCA9IGZhbHNlO1xuICAgIFxuICAgIGlmICh0aGF0LnR5cGUgPT09ICd5b3V0dWJlJykge1xuICAgICAgaWYgKHRoYXQueXRSZWFkeSkge1xuICAgICAgICB0aGF0LiR2aWRlby50cmlnZ2VyKCdwbGF5Jyk7XG4gICAgICAgIHRoYXQueXRQbGF5ZXIucGxheVZpZGVvKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoYXQudmlkZW8ucGxheSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGF0O1xuICB9O1xuXG4gIFZpZGVvV3JhcHBlci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgdGhhdC5fX21hbnVhbGx5U3RvcHBlZCA9IGZhbHNlO1xuICAgIFxuICAgIGlmICh0aGF0LnR5cGUgPT09ICd5b3V0dWJlJykge1xuICAgICAgaWYgKHRoYXQueXRSZWFkeSkge1xuICAgICAgICB0aGF0Lnl0UGxheWVyLnBhdXNlVmlkZW8oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhhdC52aWRlby5wYXVzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGF0O1xuICB9O1xuXG4gIFZpZGVvV3JhcHBlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICB0aGF0Ll9fbWFudWFsbHlTdG9wcGVkID0gdHJ1ZTtcbiAgICBcbiAgICBpZiAodGhhdC50eXBlID09PSAneW91dHViZScpIHtcbiAgICAgIGlmICh0aGF0Lnl0UmVhZHkpIHtcbiAgICAgICAgdGhhdC55dFBsYXllci5wYXVzZVZpZGVvKCk7XG4gICAgICAgIHRoYXQueXRQbGF5ZXIuc2Vla1RvKDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGF0LnZpZGVvLnBhdXNlKCk7XG4gICAgICB0aGF0LnZpZGVvLmN1cnJlbnRUaW1lID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhhdDtcbiAgfTtcblxuICBWaWRlb1dyYXBwZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgaWYgKHRoYXQueXRQbGF5ZXIpIHtcbiAgICAgIHRoYXQueXRQbGF5ZXIuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIHRoYXQuJHZpZGVvLnJlbW92ZSgpO1xuXG4gICAgcmV0dXJuIHRoYXQ7XG4gIH07XG5cbiAgVmlkZW9XcmFwcGVyLnByb3RvdHlwZS5nZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uIChzZWNvbmRzKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuXG4gICAgaWYgKHRoYXQudHlwZSA9PT0gJ3lvdXR1YmUnKSB7XG4gICAgICBpZiAodGhhdC55dFJlYWR5KSB7XG4gICAgICAgIHJldHVybiB0aGF0Lnl0UGxheWVyLmdldEN1cnJlbnRUaW1lKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGF0LnZpZGVvLmN1cnJlbnRUaW1lO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9O1xuXG4gIFZpZGVvV3JhcHBlci5wcm90b3R5cGUuc2V0Q3VycmVudFRpbWUgPSBmdW5jdGlvbiAoc2Vjb25kcykge1xuICAgIHZhciB0aGF0ID0gdGhpcztcblxuICAgIGlmICh0aGF0LnR5cGUgPT09ICd5b3V0dWJlJykge1xuICAgICAgaWYgKHRoYXQueXRSZWFkeSkge1xuICAgICAgICB0aGF0Lnl0UGxheWVyLnNlZWtUbyhzZWNvbmRzLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhhdC52aWRlby5jdXJyZW50VGltZSA9IHNlY29uZHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoYXQ7XG4gIH07XG5cbiAgVmlkZW9XcmFwcGVyLnByb3RvdHlwZS5nZXREdXJhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG5cbiAgICBpZiAodGhhdC50eXBlID09PSAneW91dHViZScpIHtcbiAgICAgIGlmICh0aGF0Lnl0UmVhZHkpIHtcbiAgICAgICAgcmV0dXJuIHRoYXQueXRQbGF5ZXIuZ2V0RHVyYXRpb24oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoYXQudmlkZW8uZHVyYXRpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIDA7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRoaXMgd2lsbCBsb2FkIHRoZSB5b3V0dWJlIEFQSSAoaWYgbm90IGxvYWRlZCB5ZXQpXG4gICAqIFVzZSAkKHdpbmRvdykub25lKCd5b3V0dWJlX2FwaV9sb2FkJywgLi4uKSB0byBsaXN0ZW4gZm9yIEFQSSBsb2FkZWQgZXZlbnRcbiAgICovXG4gIFZpZGVvV3JhcHBlci5sb2FkWW91dHViZUFQSSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAod2luZG93WydZVCddKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghJCgnc2NyaXB0W3NyYyo9d3d3XFxcXC55b3V0dWJlXFxcXC5jb21cXFxcL2lmcmFtZV9hcGldJykubGVuZ3RoKSB7XG4gICAgICAkKCc8c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpXCI+JykuYXBwZW5kVG8oJ2JvZHknKTtcbiAgICB9XG4gICAgdmFyIHl0QVBJTG9hZEludCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh3aW5kb3dbJ1lUJ10gJiYgd2luZG93WydZVCddLmxvYWRlZCkge1xuICAgICAgICAkKHdpbmRvdykudHJpZ2dlcigneW91dHViZV9hcGlfbG9hZCcpO1xuICAgICAgICBjbGVhclRpbWVvdXQoeXRBUElMb2FkSW50KTtcbiAgICAgIH1cbiAgICB9LCA1MCk7XG4gIH07XG5cbiAgdmFyIGdldERldmljZU9yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xuXG4gICAgaWYgKCdtYXRjaE1lZGlhJyBpbiB3aW5kb3cpIHtcbiAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihvcmllbnRhdGlvbjogcG9ydHJhaXQpXCIpLm1hdGNoZXMpIHtcbiAgICAgICAgIHJldHVybiAncG9ydHJhaXQnO1xuICAgICAgfSBlbHNlIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihvcmllbnRhdGlvbjogbGFuZHNjYXBlKVwiKS5tYXRjaGVzKSB7XG4gICAgICAgICByZXR1cm4gJ2xhbmRzY2FwZSc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNjcmVlbi5oZWlnaHQgPiBzY3JlZW4ud2lkdGgpIHtcbiAgICAgIHJldHVybiAncG9ydHJhaXQnO1xuICAgIH1cblxuICAgIC8vIEV2ZW4gc3F1YXJlIGRldmljZXMgaGF2ZSBvcmllbnRhdGlvbixcbiAgICAvLyAgIGJ1dCBhIGRlc2t0b3AgYnJvd3NlciBtYXkgYmUgdG9vIG9sZCBmb3IgYG1hdGNoTWVkaWFgLlxuICAgIC8vIERlZmF1bHRpbmcgdG8gYGxhbmRzY2FwZWAgZm9yIHRoZSBWRVJZIHJhcmUgY2FzZSBvZiBhIHNxdWFyZSBkZXNrdG9wIHNjcmVlbiBpcyBnb29kIGVub3VnaC5cbiAgICByZXR1cm4gJ2xhbmRzY2FwZSc7XG4gIH07XG5cbiAgdmFyIGdldFdpbmRvd09yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPiB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgcmV0dXJuICdwb3J0cmFpdCc7XG4gICAgfVxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgcmV0dXJuICdsYW5kc2NhcGUnO1xuICAgIH1cblxuICAgIHJldHVybiAnc3F1YXJlJztcbiAgfTtcblxuICAvKiBTVVBQT1JUUyBGSVhFRCBQT1NJVElPTj9cbiAgICpcbiAgICogQmFzZWQgb24gY29kZSBmcm9tIGpRdWVyeSBNb2JpbGUgMS4xLjBcbiAgICogaHR0cDovL2pxdWVyeW1vYmlsZS5jb20vXG4gICAqXG4gICAqIEluIGEgbnV0c2hlbGwsIHdlIG5lZWQgdG8gZmlndXJlIG91dCBpZiBmaXhlZCBwb3NpdGlvbmluZyBpcyBzdXBwb3J0ZWQuXG4gICAqIFVuZm9ydHVuYXRlbHksIHRoaXMgaXMgdmVyeSBkaWZmaWN1bHQgdG8gZG8gb24gaU9TLCBhbmQgdXN1YWxseSBpbnZvbHZlc1xuICAgKiBpbmplY3RpbmcgY29udGVudCwgc2Nyb2xsaW5nIHRoZSBwYWdlLCBldGMuLiBJdCdzIHVnbHkuXG4gICAqIGpRdWVyeSBNb2JpbGUgdXNlcyB0aGlzIHdvcmthcm91bmQuIEl0J3Mgbm90IGlkZWFsLCBidXQgd29ya3MuXG4gICAqXG4gICAqIE1vZGlmaWVkIHRvIGRldGVjdCBJRTZcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4gIHZhciBzdXBwb3J0c0ZpeGVkUG9zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICAgICwgcGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm1cbiAgICAgICAgLy8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cbiAgICAgICwgd2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOV0rKS8gKVxuICAgICAgLCB3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdXG4gICAgICAsIGZmbWF0Y2ggPSB1YS5tYXRjaCggL0Zlbm5lY1xcLyhbMC05XSspLyApXG4gICAgICAsIGZmdmVyc2lvbiA9ICEhZmZtYXRjaCAmJiBmZm1hdGNoWyAxIF1cbiAgICAgICwgb3BlcmFtbW9iaWxlbWF0Y2ggPSB1YS5tYXRjaCggL09wZXJhIE1vYmlcXC8oWzAtOV0rKS8gKVxuICAgICAgLCBvbXZlcnNpb24gPSAhIW9wZXJhbW1vYmlsZW1hdGNoICYmIG9wZXJhbW1vYmlsZW1hdGNoWyAxIF1cbiAgICAgICwgaWVtYXRjaCA9IHVhLm1hdGNoKCAvTVNJRSAoWzAtOV0rKS8gKVxuICAgICAgLCBpZXZlcnNpb24gPSAhIWllbWF0Y2ggJiYgaWVtYXRjaFsgMSBdO1xuXG4gICAgcmV0dXJuICEoXG4gICAgICAvLyBpT1MgNC4zIGFuZCBvbGRlciA6IFBsYXRmb3JtIGlzIGlQaG9uZS9QYWQvVG91Y2ggYW5kIFdlYmtpdCB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1MzQgKGlvczUpXG4gICAgICAoKHBsYXRmb3JtLmluZGV4T2YoIFwiaVBob25lXCIgKSA+IC0xIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBhZFwiICkgPiAtMSAgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUG9kXCIgKSA+IC0xICkgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCkgfHxcblxuICAgICAgLy8gT3BlcmEgTWluaVxuICAgICAgKHdpbmRvdy5vcGVyYW1pbmkgJiYgKHt9KS50b1N0cmluZy5jYWxsKCB3aW5kb3cub3BlcmFtaW5pICkgPT09IFwiW29iamVjdCBPcGVyYU1pbmldXCIpIHx8XG4gICAgICAob3BlcmFtbW9iaWxlbWF0Y2ggJiYgb212ZXJzaW9uIDwgNzQ1OCkgfHxcblxuICAgICAgLy9BbmRyb2lkIGx0ZSAyLjE6IFBsYXRmb3JtIGlzIEFuZHJvaWQgYW5kIFdlYmtpdCB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1MzMgKEFuZHJvaWQgMi4yKVxuICAgICAgKHVhLmluZGV4T2YoIFwiQW5kcm9pZFwiICkgPiAtMSAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTMzKSB8fFxuXG4gICAgICAvLyBGaXJlZm94IE1vYmlsZSBiZWZvcmUgNi4wIC1cbiAgICAgIChmZnZlcnNpb24gJiYgZmZ2ZXJzaW9uIDwgNikgfHxcblxuICAgICAgLy8gV2ViT1MgbGVzcyB0aGFuIDNcbiAgICAgIChcInBhbG1HZXRSZXNvdXJjZVwiIGluIHdpbmRvdyAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0KSB8fFxuXG4gICAgICAvLyBNZWVHb1xuICAgICAgKHVhLmluZGV4T2YoIFwiTWVlR29cIiApID4gLTEgJiYgdWEuaW5kZXhPZiggXCJOb2tpYUJyb3dzZXIvOC41LjBcIiApID4gLTEpIHx8XG5cbiAgICAgIC8vIElFNlxuICAgICAgKGlldmVyc2lvbiAmJiBpZXZlcnNpb24gPD0gNilcbiAgICApO1xuICB9KCkpO1xuXG59KGpRdWVyeSwgd2luZG93KSk7XG4iLCIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuICAvLyBBZGQgc21vb3RoIHNjcm9sbGluZyB0byBhbGwgbGlua3NcbiAgJChcIm5hdiBhXCIpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAvLyBNYWtlIHN1cmUgdGhpcy5oYXNoIGhhcyBhIHZhbHVlIGJlZm9yZSBvdmVycmlkaW5nIGRlZmF1bHQgYmVoYXZpb3JcbiAgICBpZiAodGhpcy5oYXNoICE9PSBcIlwiKSB7XG4gICAgICAvLyBQcmV2ZW50IGRlZmF1bHQgYW5jaG9yIGNsaWNrIGJlaGF2aW9yXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAvLyBTdG9yZSBoYXNoXG4gICAgICB2YXIgaGFzaCA9IHRoaXMuaGFzaDtcblxuICAgICAgLy8gVXNpbmcgalF1ZXJ5J3MgYW5pbWF0ZSgpIG1ldGhvZCB0byBhZGQgc21vb3RoIHBhZ2Ugc2Nyb2xsXG4gICAgICAvLyBUaGUgb3B0aW9uYWwgbnVtYmVyICg4MDApIHNwZWNpZmllcyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0YWtlcyB0byBzY3JvbGwgdG8gdGhlIHNwZWNpZmllZCBhcmVhXG4gICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogJChoYXNoKS5vZmZzZXQoKS50b3BcbiAgICAgIH0sIDEwMDAsIGZ1bmN0aW9uKCl7XG4gICBcbiAgICAgICAgLy8gQWRkIGhhc2ggKCMpIHRvIFVSTCB3aGVuIGRvbmUgc2Nyb2xsaW5nIChkZWZhdWx0IGNsaWNrIGJlaGF2aW9yKVxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2g7XG4gICAgICB9KTtcbiAgICB9IC8vIEVuZCBpZlxuICB9KTtcbn0pO1xuXG5cblxuXG4iXX0=
